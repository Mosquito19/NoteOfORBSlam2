\hypertarget{classORB__SLAM2_1_1MapPoint}{\section{O\-R\-B\-\_\-\-S\-L\-A\-M2\-:\-:Map\-Point类 参考}
\label{classORB__SLAM2_1_1MapPoint}\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
}


Map\-Point是一个地图点  




{\ttfamily \#include $<$Map\-Point.\-h$>$}



O\-R\-B\-\_\-\-S\-L\-A\-M2\-:\-:Map\-Point 的协作图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classORB__SLAM2_1_1MapPoint_ae8b6d24a7f79cfd260502859cb5b6901}{Map\-Point} (const cv\-::\-Mat \&Pos, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-Ref\-K\-F, \hyperlink{classORB__SLAM2_1_1Map}{Map} $\ast$p\-Map)
\begin{DoxyCompactList}\small\item\em 给定坐标与keyframe构造\-Map\-Point \end{DoxyCompactList}\item 
\hyperlink{classORB__SLAM2_1_1MapPoint_abbb2b679ea956845f315a69773618fa7}{Map\-Point} (const cv\-::\-Mat \&Pos, \hyperlink{classORB__SLAM2_1_1Map}{Map} $\ast$p\-Map, \hyperlink{classORB__SLAM2_1_1Frame}{Frame} $\ast$p\-Frame, const int \&idx\-F)
\begin{DoxyCompactList}\small\item\em 给定坐标与frame构造\-Map\-Point \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ad65e6322e9d06314db235ff4d072509f}{void {\bfseries Set\-World\-Pos} (const cv\-::\-Mat \&Pos)}\label{classORB__SLAM2_1_1MapPoint_ad65e6322e9d06314db235ff4d072509f}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a0e59b21447d5d889b39ad2fcc1b1db49}{cv\-::\-Mat {\bfseries Get\-World\-Pos} ()}\label{classORB__SLAM2_1_1MapPoint_a0e59b21447d5d889b39ad2fcc1b1db49}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_af0198d242a96476faa52da0ede3c8f10}{cv\-::\-Mat {\bfseries Get\-Normal} ()}\label{classORB__SLAM2_1_1MapPoint_af0198d242a96476faa52da0ede3c8f10}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a98f595f0421fd95e406d1de6f48e05f3}{\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$ {\bfseries Get\-Reference\-Key\-Frame} ()}\label{classORB__SLAM2_1_1MapPoint_a98f595f0421fd95e406d1de6f48e05f3}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ae91e056d3b79e08a3fadd976888f6b09}{std\-::map$<$ \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$, size\-\_\-t $>$ {\bfseries Get\-Observations} ()}\label{classORB__SLAM2_1_1MapPoint_ae91e056d3b79e08a3fadd976888f6b09}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a7fbc2a95f49eb6facdc5d5fa35de3287}{int {\bfseries Observations} ()}\label{classORB__SLAM2_1_1MapPoint_a7fbc2a95f49eb6facdc5d5fa35de3287}

\item 
void \hyperlink{classORB__SLAM2_1_1MapPoint_a37277ee3c7d8657976e749ab920bb13f}{Add\-Observation} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, size\-\_\-t idx)
\begin{DoxyCompactList}\small\item\em 添加观测 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a79e6a93ea0c39329a082f4f69560f1be}{void {\bfseries Erase\-Observation} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)}\label{classORB__SLAM2_1_1MapPoint_a79e6a93ea0c39329a082f4f69560f1be}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_afbe3f2cf7f4d5e4596fa9f7ff0d44470}{int {\bfseries Get\-Index\-In\-Key\-Frame} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)}\label{classORB__SLAM2_1_1MapPoint_afbe3f2cf7f4d5e4596fa9f7ff0d44470}

\item 
bool \hyperlink{classORB__SLAM2_1_1MapPoint_a7a8c48a885598ba4da3b188791dfd009}{Is\-In\-Key\-Frame} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)
\begin{DoxyCompactList}\small\item\em check \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} is in keyframe \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a7ed2a66b528165d6c39cb6f84f684308}{void {\bfseries Set\-Bad\-Flag} ()}\label{classORB__SLAM2_1_1MapPoint_a7ed2a66b528165d6c39cb6f84f684308}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a46bb6b57cd914c9ebad30007f3af469a}{bool {\bfseries is\-Bad} ()}\label{classORB__SLAM2_1_1MapPoint_a46bb6b57cd914c9ebad30007f3af469a}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a8f2e205afcfae3dc70196bcd29194440}{void {\bfseries Replace} (\hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$p\-M\-P)}\label{classORB__SLAM2_1_1MapPoint_a8f2e205afcfae3dc70196bcd29194440}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ad8814ed8121bd730c640c620ed623baf}{\hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ {\bfseries Get\-Replaced} ()}\label{classORB__SLAM2_1_1MapPoint_ad8814ed8121bd730c640c620ed623baf}

\item 
void \hyperlink{classORB__SLAM2_1_1MapPoint_a0a234f5bd6bc19a9ea55fad0c9e6db5f}{Increase\-Visible} (int n=1)
\begin{DoxyCompactList}\small\item\em Increase Visible. \end{DoxyCompactList}\item 
void \hyperlink{classORB__SLAM2_1_1MapPoint_aa097cd8cf993a54e999f297e05729392}{Increase\-Found} (int n=1)
\begin{DoxyCompactList}\small\item\em Increase Found. \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ac1b7c69a2d9f6bd785d465380844ce10}{float {\bfseries Get\-Found\-Ratio} ()}\label{classORB__SLAM2_1_1MapPoint_ac1b7c69a2d9f6bd785d465380844ce10}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a0d081d56b0f398c52581b3e0eaa1cb15}{int {\bfseries Get\-Found} ()}\label{classORB__SLAM2_1_1MapPoint_a0d081d56b0f398c52581b3e0eaa1cb15}

\item 
void \hyperlink{classORB__SLAM2_1_1MapPoint_ab4c3dfd8f5f05a4b1888021f1fac3d84}{Compute\-Distinctive\-Descriptors} ()
\begin{DoxyCompactList}\small\item\em 计算具有代表的描述子 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a8f9faa5b4cc513795485dcfb460ea3d0}{cv\-::\-Mat {\bfseries Get\-Descriptor} ()}\label{classORB__SLAM2_1_1MapPoint_a8f9faa5b4cc513795485dcfb460ea3d0}

\item 
void \hyperlink{classORB__SLAM2_1_1MapPoint_ac5b8e4ec6a7737860af57058bdd16124}{Update\-Normal\-And\-Depth} ()
\begin{DoxyCompactList}\small\item\em 更新平均观测方向以及观测距离范围 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aac7224845c1d39016c50dcaacc0ebe40}{float {\bfseries Get\-Min\-Distance\-Invariance} ()}\label{classORB__SLAM2_1_1MapPoint_aac7224845c1d39016c50dcaacc0ebe40}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_abf921da31ee4d522181bb6b8d9149fff}{float {\bfseries Get\-Max\-Distance\-Invariance} ()}\label{classORB__SLAM2_1_1MapPoint_abf921da31ee4d522181bb6b8d9149fff}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aa0e884ba7dc5b85ddb5ccb64113a8594}{int {\bfseries Predict\-Scale} (const float \&current\-Dist, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)}\label{classORB__SLAM2_1_1MapPoint_aa0e884ba7dc5b85ddb5ccb64113a8594}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_af083bd50463ee191a1abb540bb40ea3d}{int {\bfseries Predict\-Scale} (const float \&current\-Dist, \hyperlink{classORB__SLAM2_1_1Frame}{Frame} $\ast$p\-F)}\label{classORB__SLAM2_1_1MapPoint_af083bd50463ee191a1abb540bb40ea3d}

\end{DoxyCompactItemize}
\subsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_afba2eb4d8400a0c822ee991ba445d9be}{long unsigned int \hyperlink{classORB__SLAM2_1_1MapPoint_afba2eb4d8400a0c822ee991ba445d9be}{mn\-Id}}\label{classORB__SLAM2_1_1MapPoint_afba2eb4d8400a0c822ee991ba445d9be}

\begin{DoxyCompactList}\small\item\em Global I\-D for \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point}. \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ad3f9757b633aac7c026a0e5330e4b10c}{const long int \hyperlink{classORB__SLAM2_1_1MapPoint_ad3f9757b633aac7c026a0e5330e4b10c}{mn\-First\-K\-Fid}}\label{classORB__SLAM2_1_1MapPoint_ad3f9757b633aac7c026a0e5330e4b10c}

\begin{DoxyCompactList}\small\item\em 创建该\-Map\-Point的关键帧\-I\-D \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a68929d6ead18e19745ec358f2ef8776d}{const long int \hyperlink{classORB__SLAM2_1_1MapPoint_a68929d6ead18e19745ec358f2ef8776d}{mn\-First\-Frame}}\label{classORB__SLAM2_1_1MapPoint_a68929d6ead18e19745ec358f2ef8776d}

\begin{DoxyCompactList}\small\item\em 创建该\-Map\-Point的帧\-I\-D（即每一关键帧有一个帧\-I\-D） \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a2653a4c69121627fcc5ae812b1809a28}{int {\bfseries n\-Obs}}\label{classORB__SLAM2_1_1MapPoint_a2653a4c69121627fcc5ae812b1809a28}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a7d735552c42630c00bca4c2094fbbbf3}{float {\bfseries m\-Track\-Proj\-X}}\label{classORB__SLAM2_1_1MapPoint_a7d735552c42630c00bca4c2094fbbbf3}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a5ab59610931a5c2e14f502e8233571e4}{float {\bfseries m\-Track\-Proj\-Y}}\label{classORB__SLAM2_1_1MapPoint_a5ab59610931a5c2e14f502e8233571e4}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a4f0a0671a3587e2aac0708eed07c5170}{float {\bfseries m\-Track\-Proj\-X\-R}}\label{classORB__SLAM2_1_1MapPoint_a4f0a0671a3587e2aac0708eed07c5170}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aac515bf003cea5f99737d13475c46816}{int {\bfseries mn\-Track\-Scale\-Level}}\label{classORB__SLAM2_1_1MapPoint_aac515bf003cea5f99737d13475c46816}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a728107bc670ba47d79bad5ba288256d6}{float {\bfseries m\-Track\-View\-Cos}}\label{classORB__SLAM2_1_1MapPoint_a728107bc670ba47d79bad5ba288256d6}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a0187350fa3fddd0bf89ccf354acb4766}{bool {\bfseries mb\-Track\-In\-View}}\label{classORB__SLAM2_1_1MapPoint_a0187350fa3fddd0bf89ccf354acb4766}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a19152183cfddc71b63650175def6aec7}{long unsigned int {\bfseries mn\-Track\-Reference\-For\-Frame}}\label{classORB__SLAM2_1_1MapPoint_a19152183cfddc71b63650175def6aec7}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aea3a63ce27fc39e536a6ceef7c1f3473}{long unsigned int {\bfseries mn\-Last\-Frame\-Seen}}\label{classORB__SLAM2_1_1MapPoint_aea3a63ce27fc39e536a6ceef7c1f3473}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ad4da26d02aa54a3e0be6a09e90fa39ec}{long unsigned int {\bfseries mn\-B\-A\-Local\-For\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_ad4da26d02aa54a3e0be6a09e90fa39ec}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aedba463c6440c2b448e9ec21acd58b9a}{long unsigned int {\bfseries mn\-Fuse\-Candidate\-For\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_aedba463c6440c2b448e9ec21acd58b9a}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a44172716cac5a56004a60d165de8cfa2}{long unsigned int {\bfseries mn\-Loop\-Point\-For\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_a44172716cac5a56004a60d165de8cfa2}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a86626462be01ad9a133dca0f5b49e688}{long unsigned int {\bfseries mn\-Corrected\-By\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_a86626462be01ad9a133dca0f5b49e688}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ade5858af14ed7924d48dbf191ea5448c}{long unsigned int {\bfseries mn\-Corrected\-Reference}}\label{classORB__SLAM2_1_1MapPoint_ade5858af14ed7924d48dbf191ea5448c}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a2669d92452bb1347a6a09700e369f049}{cv\-::\-Mat {\bfseries m\-Pos\-G\-B\-A}}\label{classORB__SLAM2_1_1MapPoint_a2669d92452bb1347a6a09700e369f049}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_abcef580d7b3562ea9025ea1dc2141b92}{long unsigned int {\bfseries mn\-B\-A\-Global\-For\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_abcef580d7b3562ea9025ea1dc2141b92}

\end{DoxyCompactItemize}
\subsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aa79702928d566db4fcd7716249bd96a2}{static long unsigned int {\bfseries n\-Next\-Id} =0}\label{classORB__SLAM2_1_1MapPoint_aa79702928d566db4fcd7716249bd96a2}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a58d0ed9067593833efa652ea671ebf62}{static std\-::mutex {\bfseries m\-Global\-Mutex}}\label{classORB__SLAM2_1_1MapPoint_a58d0ed9067593833efa652ea671ebf62}

\end{DoxyCompactItemize}
\subsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a39741adada8dcd302afbf45ec2e72af0}{cv\-::\-Mat \hyperlink{classORB__SLAM2_1_1MapPoint_a39741adada8dcd302afbf45ec2e72af0}{m\-World\-Pos}}\label{classORB__SLAM2_1_1MapPoint_a39741adada8dcd302afbf45ec2e72af0}

\begin{DoxyCompactList}\small\item\em Map\-Point在世界坐标系下的坐标 \end{DoxyCompactList}\item 
std\-::map$<$ \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$, size\-\_\-t $>$ \hyperlink{classORB__SLAM2_1_1MapPoint_a189bea541f860af75ceb60300b59d8e3}{m\-Observations}
\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aba0cff72e2182ff72d32edd77dc7832d}{cv\-::\-Mat \hyperlink{classORB__SLAM2_1_1MapPoint_aba0cff72e2182ff72d32edd77dc7832d}{m\-Normal\-Vector}}\label{classORB__SLAM2_1_1MapPoint_aba0cff72e2182ff72d32edd77dc7832d}

\begin{DoxyCompactList}\small\item\em 也是该特征在k\-F中的索引，第多少个特征 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ac2a05b8ddc806ecc6939f42d13828876}{cv\-::\-Mat \hyperlink{classORB__SLAM2_1_1MapPoint_ac2a05b8ddc806ecc6939f42d13828876}{m\-Descriptor}}\label{classORB__SLAM2_1_1MapPoint_ac2a05b8ddc806ecc6939f42d13828876}

\begin{DoxyCompactList}\small\item\em 通过 \hyperlink{classORB__SLAM2_1_1MapPoint_ab4c3dfd8f5f05a4b1888021f1fac3d84}{Compute\-Distinctive\-Descriptors()} 得到的最优描述子 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a27cc4fee44b1ae77b24a8c766c617058}{\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$ {\bfseries mp\-Ref\-K\-F}}\label{classORB__SLAM2_1_1MapPoint_a27cc4fee44b1ae77b24a8c766c617058}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aadb2c83e36dc01e47983f57e831bac7b}{int {\bfseries mn\-Visible}}\label{classORB__SLAM2_1_1MapPoint_aadb2c83e36dc01e47983f57e831bac7b}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a1defea85441b8063ef9ebb47c9959289}{int \hyperlink{classORB__SLAM2_1_1MapPoint_a1defea85441b8063ef9ebb47c9959289}{mn\-Found}}\label{classORB__SLAM2_1_1MapPoint_a1defea85441b8063ef9ebb47c9959289}

\begin{DoxyCompactList}\small\item\em // 跟踪到该\-Map\-Point的\-Frame数相比预计可观测到该\-Map\-Point的\-Frame数的比例需大于25\% \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aa8f2fc3c4b67c04e97162a5084e1dada}{bool {\bfseries mb\-Bad}}\label{classORB__SLAM2_1_1MapPoint_aa8f2fc3c4b67c04e97162a5084e1dada}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_abf1fe1c8a41919e1890b70baa18bd2fb}{\hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ {\bfseries mp\-Replaced}}\label{classORB__SLAM2_1_1MapPoint_abf1fe1c8a41919e1890b70baa18bd2fb}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_ac179383327d65067da6febe55cbfc32a}{float {\bfseries mf\-Min\-Distance}}\label{classORB__SLAM2_1_1MapPoint_ac179383327d65067da6febe55cbfc32a}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_afc04bae1b7819dd158a572de56074f63}{float {\bfseries mf\-Max\-Distance}}\label{classORB__SLAM2_1_1MapPoint_afc04bae1b7819dd158a572de56074f63}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_aad9ad02a540966d12b75460238290d90}{\hyperlink{classORB__SLAM2_1_1Map}{Map} $\ast$ {\bfseries mp\-Map}}\label{classORB__SLAM2_1_1MapPoint_aad9ad02a540966d12b75460238290d90}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a592b97bed3453c0a599336fa848a8cef}{std\-::mutex {\bfseries m\-Mutex\-Pos}}\label{classORB__SLAM2_1_1MapPoint_a592b97bed3453c0a599336fa848a8cef}

\item 
\hypertarget{classORB__SLAM2_1_1MapPoint_a3ab20d400977581ac45a109f5544ffda}{std\-::mutex {\bfseries m\-Mutex\-Features}}\label{classORB__SLAM2_1_1MapPoint_a3ab20d400977581ac45a109f5544ffda}

\end{DoxyCompactItemize}


\subsection{详细描述}
Map\-Point是一个地图点 

在文件 Map\-Point.\-h 第 41 行定义.



\subsection{构造及析构函数说明}
\hypertarget{classORB__SLAM2_1_1MapPoint_ae8b6d24a7f79cfd260502859cb5b6901}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Map\-Point@{Map\-Point}}
\index{Map\-Point@{Map\-Point}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Map\-Point}]{\setlength{\rightskip}{0pt plus 5cm}O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Map\-Point (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{Pos, }
\item[{{\bf Key\-Frame} $\ast$}]{p\-Ref\-K\-F, }
\item[{{\bf Map} $\ast$}]{p\-Map}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_ae8b6d24a7f79cfd260502859cb5b6901}


给定坐标与keyframe构造\-Map\-Point 

双目：\-Stereo\-Initialization()，\-Create\-New\-Key\-Frame()，\-Local\-Mapping\-::\-Create\-New\-Map\-Points() 单目：\-Create\-Initial\-Map\-Monocular()，\-Local\-Mapping\-::\-Create\-New\-Map\-Points() 
\begin{DoxyParams}{参数}
{\em Pos} & Map\-Point的坐标（wrt世界坐标系） \\
\hline
{\em p\-Ref\-K\-F} & \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} \\
\hline
{\em p\-Map} & \hyperlink{classORB__SLAM2_1_1Map}{Map} \\
\hline
\end{DoxyParams}


在文件 Map\-Point.\-cpp 第 41 行定义.



参考 mn\-Id, m\-Normal\-Vector , 以及 m\-World\-Pos.

\hypertarget{classORB__SLAM2_1_1MapPoint_abbb2b679ea956845f315a69773618fa7}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Map\-Point@{Map\-Point}}
\index{Map\-Point@{Map\-Point}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Map\-Point}]{\setlength{\rightskip}{0pt plus 5cm}O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Map\-Point (
\begin{DoxyParamCaption}
\item[{const cv\-::\-Mat \&}]{Pos, }
\item[{{\bf Map} $\ast$}]{p\-Map, }
\item[{{\bf Frame} $\ast$}]{p\-Frame, }
\item[{const int \&}]{idx\-F}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_abbb2b679ea956845f315a69773618fa7}


给定坐标与frame构造\-Map\-Point 

双目：\-Update\-Last\-Frame() 
\begin{DoxyParams}{参数}
{\em Pos} & Map\-Point的坐标（wrt世界坐标系） \\
\hline
{\em p\-Map} & \hyperlink{classORB__SLAM2_1_1Map}{Map} \\
\hline
{\em p\-Frame} & \hyperlink{classORB__SLAM2_1_1Frame}{Frame} \\
\hline
{\em idx\-F} & Map\-Point在\-Frame中的索引，即对应的特征点的编号 \\
\hline
\end{DoxyParams}


在文件 Map\-Point.\-cpp 第 64 行定义.



参考 m\-Descriptor, mn\-Id, m\-Normal\-Vector , 以及 m\-World\-Pos.



\subsection{成员函数说明}
\hypertarget{classORB__SLAM2_1_1MapPoint_a37277ee3c7d8657976e749ab920bb13f}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Add\-Observation@{Add\-Observation}}
\index{Add\-Observation@{Add\-Observation}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Add\-Observation}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Add\-Observation (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F, }
\item[{size\-\_\-t}]{idx}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_a37277ee3c7d8657976e749ab920bb13f}


添加观测 

记录哪些\-Key\-Frame的那个特征点能观测到该\-Map\-Point \par
并增加观测的相机数目n\-Obs，单目+1，双目或者grbd+2 这个函数是建立关键帧共视关系的核心函数，能共同观测到某些\-Map\-Points的关键帧是共视关键帧 
\begin{DoxyParams}{参数}
{\em p\-K\-F} & \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} \\
\hline
{\em idx} & Map\-Point在\-Key\-Frame中的索引 \\
\hline
\end{DoxyParams}
m\-Observations是一个map$<$ pkf$\ast$ ,idx$>$ count 功能看声明 

在文件 Map\-Point.\-cpp 第 127 行定义.



参考 m\-Observations.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Correct\-Loop(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-Initial\-Map\-Monocular(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-New\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Create\-New\-Map\-Points(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Fuse(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Process\-New\-Key\-Frame() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Stereo\-Initialization().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint_a37277ee3c7d8657976e749ab920bb13f_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1MapPoint_ab4c3dfd8f5f05a4b1888021f1fac3d84}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Compute\-Distinctive\-Descriptors@{Compute\-Distinctive\-Descriptors}}
\index{Compute\-Distinctive\-Descriptors@{Compute\-Distinctive\-Descriptors}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Compute\-Distinctive\-Descriptors}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Compute\-Distinctive\-Descriptors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_ab4c3dfd8f5f05a4b1888021f1fac3d84}


计算具有代表的描述子 

由于一个\-Map\-Point会被许多相机观测到，因此在插入关键帧后，需要判断是否更新当前点的最适合的描述子 \par
先获得当前点的所有描述子，然后计算描述子之间的两两距离，最好的描述子与其他描述子应该具有最小的距离中值 \begin{DoxySeeAlso}{参见}
I\-I\-I -\/ C3.\-3 
\end{DoxySeeAlso}


在文件 Map\-Point.\-cpp 第 302 行定义.



参考 m\-Descriptor , 以及 m\-Observations.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Correct\-Loop(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-Initial\-Map\-Monocular(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-New\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Create\-New\-Map\-Points(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Process\-New\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Search\-In\-Neighbors() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Stereo\-Initialization().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint_ab4c3dfd8f5f05a4b1888021f1fac3d84_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1MapPoint_aa097cd8cf993a54e999f297e05729392}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Increase\-Found@{Increase\-Found}}
\index{Increase\-Found@{Increase\-Found}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Increase\-Found}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Increase\-Found (
\begin{DoxyParamCaption}
\item[{int}]{n = {\ttfamily 1}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_aa097cd8cf993a54e999f297e05729392}


Increase Found. 

能找到该点的帧数+n，n默认为1 \begin{DoxySeeAlso}{参见}
\hyperlink{classORB__SLAM2_1_1Tracking_af670c614f4e10d58c9f7aad9865b5c08}{Tracking\-::\-Track\-Local\-Map()} 
\end{DoxySeeAlso}


在文件 Map\-Point.\-cpp 第 283 行定义.



参考 mn\-Found.

\hypertarget{classORB__SLAM2_1_1MapPoint_a0a234f5bd6bc19a9ea55fad0c9e6db5f}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Increase\-Visible@{Increase\-Visible}}
\index{Increase\-Visible@{Increase\-Visible}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Increase\-Visible}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Increase\-Visible (
\begin{DoxyParamCaption}
\item[{int}]{n = {\ttfamily 1}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_a0a234f5bd6bc19a9ea55fad0c9e6db5f}


Increase Visible. 

Visible表示：
\begin{DoxyEnumerate}
\item 该\-Map\-Point在某些帧的视野范围内，通过\-Frame\-::is\-In\-Frustum()函数判断
\item 该\-Map\-Point被这些帧观测到，但并不一定能和这些帧的特征点匹配上 例如：有一个\-Map\-Point（记为\-M），在某一帧\-F的视野范围内， 但并不表明该点\-M可以和\-F这一帧的某个特征点能匹配上 
\end{DoxyEnumerate}

在文件 Map\-Point.\-cpp 第 271 行定义.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Search\-Local\-Points().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint_a0a234f5bd6bc19a9ea55fad0c9e6db5f_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1MapPoint_a7a8c48a885598ba4da3b188791dfd009}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Is\-In\-Key\-Frame@{Is\-In\-Key\-Frame}}
\index{Is\-In\-Key\-Frame@{Is\-In\-Key\-Frame}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Is\-In\-Key\-Frame}]{\setlength{\rightskip}{0pt plus 5cm}bool O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Is\-In\-Key\-Frame (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_a7a8c48a885598ba4da3b188791dfd009}


check \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} is in keyframe 


\begin{DoxyParams}{参数}
{\em p\-K\-F} & \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
true if in p\-K\-F 
\end{DoxyReturn}


在文件 Map\-Point.\-cpp 第 402 行定义.



参考 m\-Observations.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Fuse() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Process\-New\-Key\-Frame().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint_a7a8c48a885598ba4da3b188791dfd009_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1MapPoint_ac5b8e4ec6a7737860af57058bdd16124}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!Update\-Normal\-And\-Depth@{Update\-Normal\-And\-Depth}}
\index{Update\-Normal\-And\-Depth@{Update\-Normal\-And\-Depth}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{Update\-Normal\-And\-Depth}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Update\-Normal\-And\-Depth (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1MapPoint_ac5b8e4ec6a7737860af57058bdd16124}


更新平均观测方向以及观测距离范围 

由于一个\-Map\-Point会被许多相机观测到，因此在插入关键帧后，需要更新相应变量 \begin{DoxySeeAlso}{参见}
I\-I\-I -\/ C2.\-2 c2.\-4 
\end{DoxySeeAlso}
norm 二范数！！！！！！！！！就是距离 

在文件 Map\-Point.\-cpp 第 414 行定义.



参考 m\-Normal\-Vector, m\-Observations , 以及 m\-World\-Pos.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Optimizer\-::\-Bundle\-Adjustment(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Correct\-Loop(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-Initial\-Map\-Monocular(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-New\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Create\-New\-Map\-Points(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Optimizer\-::\-Local\-Bundle\-Adjustment(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Optimizer\-::\-Optimize\-Essential\-Graph(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Process\-New\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Search\-In\-Neighbors() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Stereo\-Initialization().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1MapPoint_ac5b8e4ec6a7737860af57058bdd16124_icgraph}
\end{center}
\end{figure}




\subsection{类成员变量说明}
\hypertarget{classORB__SLAM2_1_1MapPoint_a189bea541f860af75ceb60300b59d8e3}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}!m\-Observations@{m\-Observations}}
\index{m\-Observations@{m\-Observations}!ORB_SLAM2::MapPoint@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point}}
\subsubsection[{m\-Observations}]{\setlength{\rightskip}{0pt plus 5cm}std\-::map$<${\bf Key\-Frame}$\ast$,size\-\_\-t$>$ O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::m\-Observations\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1MapPoint_a189bea541f860af75ceb60300b59d8e3}
观测到该\-Map\-Point的\-K\-F和该\-Map\-Point在\-K\-F中的索引， 

在文件 Map\-Point.\-h 第 133 行定义.



参考自 Add\-Observation(), Compute\-Distinctive\-Descriptors(), Is\-In\-Key\-Frame() , 以及 Update\-Normal\-And\-Depth().



该类的文档由以下文件生成\-:\begin{DoxyCompactItemize}
\item 
include/Map\-Point.\-h\item 
src/Map\-Point.\-cpp\end{DoxyCompactItemize}
