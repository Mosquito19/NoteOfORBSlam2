\hypertarget{classORB__SLAM2_1_1ORBmatcher}{\section{O\-R\-B\-\_\-\-S\-L\-A\-M2\-:\-:O\-R\-Bmatcher类 参考}
\label{classORB__SLAM2_1_1ORBmatcher}\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
}
\subsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classORB__SLAM2_1_1ORBmatcher_a6ca536b80e44da0f56fcd35ff8c6a833}{O\-R\-Bmatcher} (float nnratio=0.\-6, bool check\-Ori=true)
\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_a27c18d6977e8ec20b196e0b2fa6043cd}{Search\-By\-Projection} (\hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&F, const std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Map\-Points, const float th=3)
\begin{DoxyCompactList}\small\item\em 通过投影，对\-Local Map\-Point进行跟踪 \end{DoxyCompactList}\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_a0dba0b2bed7d16ca56e27ff4df00f557}{Search\-By\-Projection} (\hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&Current\-Frame, const \hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&Last\-Frame, const float th, const bool b\-Mono)
\begin{DoxyCompactList}\small\item\em 通过投影，对上一帧的特征点进行跟踪 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a8cc723f3364b90ac6b68b969dca0cabe}{int {\bfseries Search\-By\-Projection} (\hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&Current\-Frame, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, const std\-::set$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&s\-Already\-Found, const float th, const int O\-R\-Bdist)}\label{classORB__SLAM2_1_1ORBmatcher_a8cc723f3364b90ac6b68b969dca0cabe}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a110a51a849fcc485b18987e069f58c84}{int {\bfseries Search\-By\-Projection} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, cv\-::\-Mat Scw, const std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Points, std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Matched, int th)}\label{classORB__SLAM2_1_1ORBmatcher_a110a51a849fcc485b18987e069f58c84}

\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_ab38a8d3f3803e398c173ef45b25e66d8}{Search\-By\-Bo\-W} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, \hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&F, std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Map\-Point\-Matches)
\begin{DoxyCompactList}\small\item\em 通过词包，对关键帧的特征点进行跟踪 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a7508b39750df8f6f70dab0d2252b9d42}{int {\bfseries Search\-By\-Bo\-W} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F1, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F2, std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Matches12)}\label{classORB__SLAM2_1_1ORBmatcher_a7508b39750df8f6f70dab0d2252b9d42}

\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_aff9b6dde7878d59e334ed5ad2ddd04eb}{Search\-For\-Initialization} (\hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&F1, \hyperlink{classORB__SLAM2_1_1Frame}{Frame} \&F2, std\-::vector$<$ cv\-::\-Point2f $>$ \&vb\-Prev\-Matched, std\-::vector$<$ int $>$ \&vn\-Matches12, int window\-Size=10)
\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_a0ecb7f018e9184c67c4a48ad8616217d}{Search\-For\-Triangulation} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F1, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F2, cv\-::\-Mat F12, std\-::vector$<$ pair$<$ size\-\_\-t, size\-\_\-t $>$ $>$ \&v\-Matched\-Pairs, const bool b\-Only\-Stereo)
\begin{DoxyCompactList}\small\item\em 利用基本矩阵\-F12，在两个关键帧之间未匹配的特征点中产生新的3d点 \end{DoxyCompactList}\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_aa8ab1e3785aad3fa26855a4efccfa565}{Search\-By\-Sim3} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F1, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F2, std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Matches12, const float \&s12, const cv\-::\-Mat \&R12, const cv\-::\-Mat \&t12, const float th)
\item 
int \hyperlink{classORB__SLAM2_1_1ORBmatcher_a0b63d334ccbb34fc7dda0eed2b96320e}{Fuse} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, const vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Map\-Points, const float th=3.\-0)
\begin{DoxyCompactList}\small\item\em 将\-Map\-Points投影到关键帧p\-K\-F中，并判断是否有重复的\-Map\-Points 1.如果\-Map\-Point能匹配关键帧的特征点，并且该点有对应的\-Map\-Point，那么将两个\-Map\-Point合并（选择观测数多的） 2.如果\-Map\-Point能匹配关键帧的特征点，并且该点没有对应的\-Map\-Point，那么为该点添加\-Map\-Point \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a3062482add2618408bc4c222f833781e}{int {\bfseries Fuse} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F, cv\-::\-Mat Scw, const std\-::vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Points, float th, vector$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ \&vp\-Replace\-Point)}\label{classORB__SLAM2_1_1ORBmatcher_a3062482add2618408bc4c222f833781e}

\end{DoxyCompactItemize}
\subsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a63ff10561753f23220c2bfcea9b599f3}{static int {\bfseries Descriptor\-Distance} (const cv\-::\-Mat \&a, const cv\-::\-Mat \&b)}\label{classORB__SLAM2_1_1ORBmatcher_a63ff10561753f23220c2bfcea9b599f3}

\end{DoxyCompactItemize}
\subsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a810252607722e100efe4c4e941ae00a6}{static const int {\bfseries T\-H\-\_\-\-L\-O\-W} = 50}\label{classORB__SLAM2_1_1ORBmatcher_a810252607722e100efe4c4e941ae00a6}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_aeb28265794388e19763e9a3dabd51473}{static const int {\bfseries T\-H\-\_\-\-H\-I\-G\-H} = 100}\label{classORB__SLAM2_1_1ORBmatcher_aeb28265794388e19763e9a3dabd51473}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_aa2f2d9094b4f31db4f65c93778f71494}{static const int {\bfseries H\-I\-S\-T\-O\-\_\-\-L\-E\-N\-G\-T\-H} = 30}\label{classORB__SLAM2_1_1ORBmatcher_aa2f2d9094b4f31db4f65c93778f71494}

\end{DoxyCompactItemize}
\subsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a10df000eeb05466a5bbfd7b40c7db45d}{bool {\bfseries Check\-Dist\-Epipolar\-Line} (const cv\-::\-Key\-Point \&kp1, const cv\-::\-Key\-Point \&kp2, const cv\-::\-Mat \&F12, const \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)}\label{classORB__SLAM2_1_1ORBmatcher_a10df000eeb05466a5bbfd7b40c7db45d}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_ae6ae0904b9919f1141ef4a790cd34bfe}{float {\bfseries Radius\-By\-Viewing\-Cos} (const float \&view\-Cos)}\label{classORB__SLAM2_1_1ORBmatcher_ae6ae0904b9919f1141ef4a790cd34bfe}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_ad6613e26706798c507b5266cdd101311}{void {\bfseries Compute\-Three\-Maxima} (std\-::vector$<$ int $>$ $\ast$histo, const int L, int \&ind1, int \&ind2, int \&ind3)}\label{classORB__SLAM2_1_1ORBmatcher_ad6613e26706798c507b5266cdd101311}

\end{DoxyCompactItemize}
\subsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a08f6ee66568fa5a79600ed5ad8443893}{float {\bfseries mf\-N\-Nratio}}\label{classORB__SLAM2_1_1ORBmatcher_a08f6ee66568fa5a79600ed5ad8443893}

\item 
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a996a27217749aa15d2210c6dc6228495}{bool {\bfseries mb\-Check\-Orientation}}\label{classORB__SLAM2_1_1ORBmatcher_a996a27217749aa15d2210c6dc6228495}

\end{DoxyCompactItemize}


\subsection{详细描述}


在文件 O\-R\-Bmatcher.\-h 第 37 行定义.



\subsection{构造及析构函数说明}
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a6ca536b80e44da0f56fcd35ff8c6a833}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!O\-R\-Bmatcher@{O\-R\-Bmatcher}}
\index{O\-R\-Bmatcher@{O\-R\-Bmatcher}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{O\-R\-Bmatcher}]{\setlength{\rightskip}{0pt plus 5cm}O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-O\-R\-Bmatcher (
\begin{DoxyParamCaption}
\item[{float}]{nnratio = {\ttfamily 0.6}, }
\item[{bool}]{check\-Ori = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_a6ca536b80e44da0f56fcd35ff8c6a833}
Constructor 
\begin{DoxyParams}{参数}
{\em nnratio} & ratio of the best and the second score \\
\hline
{\em check\-Ori} & check orientation \\
\hline
\end{DoxyParams}


在文件 O\-R\-Bmatcher.\-cpp 第 46 行定义.



\subsection{成员函数说明}
\hypertarget{classORB__SLAM2_1_1ORBmatcher_a0b63d334ccbb34fc7dda0eed2b96320e}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Fuse@{Fuse}}
\index{Fuse@{Fuse}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Fuse}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Fuse (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F, }
\item[{const vector$<$ {\bf Map\-Point} $\ast$ $>$ \&}]{vp\-Map\-Points, }
\item[{const float}]{th = {\ttfamily 3.0}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_a0b63d334ccbb34fc7dda0eed2b96320e}


将\-Map\-Points投影到关键帧p\-K\-F中，并判断是否有重复的\-Map\-Points 1.如果\-Map\-Point能匹配关键帧的特征点，并且该点有对应的\-Map\-Point，那么将两个\-Map\-Point合并（选择观测数多的） 2.如果\-Map\-Point能匹配关键帧的特征点，并且该点没有对应的\-Map\-Point，那么为该点添加\-Map\-Point 


\begin{DoxyParams}{参数}
{\em p\-K\-F} & 相邻关键帧 \\
\hline
{\em vp\-Map\-Points} & 当前关键帧的\-Map\-Points \\
\hline
{\em th} & 搜索半径的因子 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
重复\-Map\-Points的数量 
\end{DoxyReturn}


在文件 O\-R\-Bmatcher.\-cpp 第 968 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Add\-Map\-Point(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Add\-Observation() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Is\-In\-Key\-Frame().



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Search\-In\-Neighbors().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_a0b63d334ccbb34fc7dda0eed2b96320e_cgraph}
\end{center}
\end{figure}




这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_a0b63d334ccbb34fc7dda0eed2b96320e_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_ab38a8d3f3803e398c173ef45b25e66d8}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-By\-Bo\-W@{Search\-By\-Bo\-W}}
\index{Search\-By\-Bo\-W@{Search\-By\-Bo\-W}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-By\-Bo\-W}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-By\-Bo\-W (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F, }
\item[{{\bf Frame} \&}]{F, }
\item[{std\-::vector$<$ {\bf Map\-Point} $\ast$ $>$ \&}]{vp\-Map\-Point\-Matches}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_ab38a8d3f3803e398c173ef45b25e66d8}


通过词包，对关键帧的特征点进行跟踪 

Key\-Frame中包含了\-Map\-Points，对这些\-Map\-Points进行tracking \par
由于每一个\-Map\-Point对应有描述子，因此可以通过描述子距离进行跟踪 \par
为了加速匹配过程，将关键帧和当前帧的描述子划分到特定层的nodes中 \par
对属于同一node的描述子计算距离进行匹配 \par
通过距离阈值、比例阈值和角度投票进行剔除误匹配 
\begin{DoxyParams}{参数}
{\em p\-K\-F} & \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} \\
\hline
{\em F} & Current \hyperlink{classORB__SLAM2_1_1Frame}{Frame} \\
\hline
{\em vp\-Map\-Point\-Matches} & F中\-Map\-Points对应的匹配，\-N\-U\-L\-L表示未匹配 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功匹配的数量 
\end{DoxyReturn}


参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Compute\-Sim3() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Track\-Reference\-Key\-Frame().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_ab38a8d3f3803e398c173ef45b25e66d8_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_a27c18d6977e8ec20b196e0b2fa6043cd}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-By\-Projection@{Search\-By\-Projection}}
\index{Search\-By\-Projection@{Search\-By\-Projection}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-By\-Projection}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-By\-Projection (
\begin{DoxyParamCaption}
\item[{{\bf Frame} \&}]{F, }
\item[{const std\-::vector$<$ {\bf Map\-Point} $\ast$ $>$ \&}]{vp\-Map\-Points, }
\item[{const float}]{th = {\ttfamily 3}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_a27c18d6977e8ec20b196e0b2fa6043cd}


通过投影，对\-Local Map\-Point进行跟踪 

将\-Local Map\-Point投影到当前帧中, 由此增加当前帧的\-Map\-Points \par
在\-Search\-Local\-Points()中已经将\-Local Map\-Points重投影（is\-In\-Frustum()）到当前帧 \par
并标记了这些点是否在当前帧的视野中，即mb\-Track\-In\-View \par
对这些\-Map\-Points，在其投影点附近根据描述子距离选取匹配，以及最终的方向投票机制进行剔除 
\begin{DoxyParams}{参数}
{\em F} & 当前帧 \\
\hline
{\em vp\-Map\-Points} & Local Map\-Points \\
\hline
{\em th} & 阈值 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功匹配的数量 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
Search\-Local\-Points() is\-In\-Frustum() 
\end{DoxySeeAlso}


参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Compute\-Sim3(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Search\-Local\-Points() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Track\-With\-Motion\-Model().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_a27c18d6977e8ec20b196e0b2fa6043cd_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_a0dba0b2bed7d16ca56e27ff4df00f557}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-By\-Projection@{Search\-By\-Projection}}
\index{Search\-By\-Projection@{Search\-By\-Projection}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-By\-Projection}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-By\-Projection (
\begin{DoxyParamCaption}
\item[{{\bf Frame} \&}]{Current\-Frame, }
\item[{const {\bf Frame} \&}]{Last\-Frame, }
\item[{const float}]{th, }
\item[{const bool}]{b\-Mono}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_a0dba0b2bed7d16ca56e27ff4df00f557}


通过投影，对上一帧的特征点进行跟踪 

上一帧中包含了\-Map\-Points，对这些\-Map\-Points进行tracking，由此增加当前帧的\-Map\-Points \par

\begin{DoxyEnumerate}
\item 将上一帧的\-Map\-Points投影到当前帧(根据速度模型可以估计当前帧的\-Tcw)
\item 在投影点附近根据描述子距离选取匹配，以及最终的方向投票机制进行剔除 
\begin{DoxyParams}{参数}
{\em Current\-Frame} & 当前帧 \\
\hline
{\em Last\-Frame} & 上一帧 \\
\hline
{\em th} & 阈值 \\
\hline
{\em b\-Mono} & 是否为单目 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功匹配的数量 
\end{DoxyReturn}
\begin{DoxySeeAlso}{参见}
\hyperlink{classORB__SLAM2_1_1ORBmatcher_ab38a8d3f3803e398c173ef45b25e66d8}{Search\-By\-Bo\-W()} 
\end{DoxySeeAlso}

\end{DoxyEnumerate}

在文件 O\-R\-Bmatcher.\-cpp 第 1512 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Frame\-::\-Get\-Features\-In\-Area(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Frame\-::m\-Tcw , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Frame\-::\-N.



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_a0dba0b2bed7d16ca56e27ff4df00f557_cgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_aa8ab1e3785aad3fa26855a4efccfa565}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-By\-Sim3@{Search\-By\-Sim3}}
\index{Search\-By\-Sim3@{Search\-By\-Sim3}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-By\-Sim3}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-By\-Sim3 (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F1, }
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F2, }
\item[{std\-::vector$<$ {\bf Map\-Point} $\ast$ $>$ \&}]{vp\-Matches12, }
\item[{const float \&}]{s12, }
\item[{const cv\-::\-Mat \&}]{R12, }
\item[{const cv\-::\-Mat \&}]{t12, }
\item[{const float}]{th}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_aa8ab1e3785aad3fa26855a4efccfa565}
空间点，这个向量的长度 

在文件 O\-R\-Bmatcher.\-cpp 第 1259 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Map\-Point\-Matches().



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Loop\-Closing\-::\-Compute\-Sim3().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_aa8ab1e3785aad3fa26855a4efccfa565_cgraph}
\end{center}
\end{figure}




这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_aa8ab1e3785aad3fa26855a4efccfa565_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_aff9b6dde7878d59e334ed5ad2ddd04eb}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-For\-Initialization@{Search\-For\-Initialization}}
\index{Search\-For\-Initialization@{Search\-For\-Initialization}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-For\-Initialization}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-For\-Initialization (
\begin{DoxyParamCaption}
\item[{{\bf Frame} \&}]{F1, }
\item[{{\bf Frame} \&}]{F2, }
\item[{std\-::vector$<$ cv\-::\-Point2f $>$ \&}]{vb\-Prev\-Matched, }
\item[{std\-::vector$<$ int $>$ \&}]{vn\-Matches12, }
\item[{int}]{window\-Size = {\ttfamily 10}}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_aff9b6dde7878d59e334ed5ad2ddd04eb}
vb\-Prev\-Matched\mbox{[}i1\mbox{]}.x,vb\-Prev\-Matched\mbox{[}i1\mbox{]}.y就是\-F1中的kp点，找这个点的附近特征点////感觉这样有些局限。。只适合平移旋转小幅度的

肯定大于0啊。。。。

??为啥 ？？哎。。。好吧 注意continue.....不符合 ind1 ind2 indi3的 才会被剔除。。。

F2里面匹配上的pt点赋值给prev\-Matched 

在文件 O\-R\-Bmatcher.\-cpp 第 474 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Frame\-::\-Get\-Features\-In\-Area().



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Monocular\-Initialization().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_aff9b6dde7878d59e334ed5ad2ddd04eb_cgraph}
\end{center}
\end{figure}




这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_aff9b6dde7878d59e334ed5ad2ddd04eb_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1ORBmatcher_a0ecb7f018e9184c67c4a48ad8616217d}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}!Search\-For\-Triangulation@{Search\-For\-Triangulation}}
\index{Search\-For\-Triangulation@{Search\-For\-Triangulation}!ORB_SLAM2::ORBmatcher@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher}}
\subsubsection[{Search\-For\-Triangulation}]{\setlength{\rightskip}{0pt plus 5cm}int O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-For\-Triangulation (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F1, }
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F2, }
\item[{cv\-::\-Mat}]{F12, }
\item[{std\-::vector$<$ pair$<$ size\-\_\-t, size\-\_\-t $>$ $>$ \&}]{v\-Matched\-Pairs, }
\item[{const bool}]{b\-Only\-Stereo}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1ORBmatcher_a0ecb7f018e9184c67c4a48ad8616217d}


利用基本矩阵\-F12，在两个关键帧之间未匹配的特征点中产生新的3d点 


\begin{DoxyParams}{参数}
{\em p\-K\-F1} & 关键帧1 \\
\hline
{\em p\-K\-F2} & 关键帧2 \\
\hline
{\em F12} & 基础矩阵 \\
\hline
{\em v\-Matched\-Pairs} & 存储匹配特征点对，特征点用其在关键帧中的索引表示 \\
\hline
{\em b\-Only\-Stereo} & 在双目和rgbd情况下，要求特征点在右图存在匹配 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功匹配的数量 
\end{DoxyReturn}


在文件 O\-R\-Bmatcher.\-cpp 第 762 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::m\-Feat\-Vec.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Create\-New\-Map\-Points().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1ORBmatcher_a0ecb7f018e9184c67c4a48ad8616217d_icgraph}
\end{center}
\end{figure}




该类的文档由以下文件生成\-:\begin{DoxyCompactItemize}
\item 
include/O\-R\-Bmatcher.\-h\item 
src/O\-R\-Bmatcher.\-cpp\end{DoxyCompactItemize}
