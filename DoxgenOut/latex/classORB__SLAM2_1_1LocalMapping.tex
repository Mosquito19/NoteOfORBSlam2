\hypertarget{classORB__SLAM2_1_1LocalMapping}{\section{O\-R\-B\-\_\-\-S\-L\-A\-M2\-:\-:Local\-Mapping类 参考}
\label{classORB__SLAM2_1_1LocalMapping}\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
}


O\-R\-B\-\_\-\-S\-L\-A\-M2\-:\-:Local\-Mapping 的协作图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_aa87b27706cc45e36cbb8c7a21c90ed23}{{\bfseries Local\-Mapping} (\hyperlink{classORB__SLAM2_1_1Map}{Map} $\ast$p\-Map, const float b\-Monocular)}\label{classORB__SLAM2_1_1LocalMapping_aa87b27706cc45e36cbb8c7a21c90ed23}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_af64985dda85b4f0775ef2ef7fc9b5942}{void {\bfseries Set\-Loop\-Closer} (\hyperlink{classORB__SLAM2_1_1LoopClosing}{Loop\-Closing} $\ast$p\-Loop\-Closer)}\label{classORB__SLAM2_1_1LocalMapping_af64985dda85b4f0775ef2ef7fc9b5942}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a164b3d0a2a75daba006469ea8aca8a63}{void {\bfseries Set\-Tracker} (\hyperlink{classORB__SLAM2_1_1Tracking}{Tracking} $\ast$p\-Tracker)}\label{classORB__SLAM2_1_1LocalMapping_a164b3d0a2a75daba006469ea8aca8a63}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a0f9fa8a0236f55629b0f485db05deb2c}{void {\bfseries Run} ()}\label{classORB__SLAM2_1_1LocalMapping_a0f9fa8a0236f55629b0f485db05deb2c}

\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_af2d70466a1a217fb7e55d874931ce688}{Insert\-Key\-Frame} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$p\-K\-F)
\begin{DoxyCompactList}\small\item\em 插入关键帧 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a0931d72a1f25f3e012f53f3e693e2a47}{void {\bfseries Request\-Stop} ()}\label{classORB__SLAM2_1_1LocalMapping_a0931d72a1f25f3e012f53f3e693e2a47}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a1e2754881977ca4d9dc7b3d0c06b4eb8}{void {\bfseries Request\-Reset} ()}\label{classORB__SLAM2_1_1LocalMapping_a1e2754881977ca4d9dc7b3d0c06b4eb8}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a6acf915f6b65bd4e2341e85a320d4930}{bool {\bfseries Stop} ()}\label{classORB__SLAM2_1_1LocalMapping_a6acf915f6b65bd4e2341e85a320d4930}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_aec0950308ba2d828d9dc16d5be34e654}{void {\bfseries Release} ()}\label{classORB__SLAM2_1_1LocalMapping_aec0950308ba2d828d9dc16d5be34e654}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a964b156d8dfcedf91d61e47aa51e973a}{bool {\bfseries is\-Stopped} ()}\label{classORB__SLAM2_1_1LocalMapping_a964b156d8dfcedf91d61e47aa51e973a}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a0474accda8e5e59048c10b1a71269881}{bool {\bfseries stop\-Requested} ()}\label{classORB__SLAM2_1_1LocalMapping_a0474accda8e5e59048c10b1a71269881}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ab0900c4ceaf6a615f53bc113f682daa6}{bool {\bfseries Accept\-Key\-Frames} ()}\label{classORB__SLAM2_1_1LocalMapping_ab0900c4ceaf6a615f53bc113f682daa6}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a5b29c603541a13d670c53348e59081bf}{void {\bfseries Set\-Accept\-Key\-Frames} (bool flag)}\label{classORB__SLAM2_1_1LocalMapping_a5b29c603541a13d670c53348e59081bf}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ae33aa5640d61d5434bd0ad00e27d8e76}{bool {\bfseries Set\-Not\-Stop} (bool flag)}\label{classORB__SLAM2_1_1LocalMapping_ae33aa5640d61d5434bd0ad00e27d8e76}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ad8fcbbdacfaeca558c5aaff32f42a57b}{void {\bfseries Interrupt\-B\-A} ()}\label{classORB__SLAM2_1_1LocalMapping_ad8fcbbdacfaeca558c5aaff32f42a57b}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ac22bd2b73269435e04c353190eae7c13}{void {\bfseries Request\-Finish} ()}\label{classORB__SLAM2_1_1LocalMapping_ac22bd2b73269435e04c353190eae7c13}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a06ce22a736be265a6856582d31e888d6}{bool {\bfseries is\-Finished} ()}\label{classORB__SLAM2_1_1LocalMapping_a06ce22a736be265a6856582d31e888d6}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a8299d3b0c603784de01ac2242f4916be}{int {\bfseries Keyframes\-In\-Queue} ()}\label{classORB__SLAM2_1_1LocalMapping_a8299d3b0c603784de01ac2242f4916be}

\end{DoxyCompactItemize}
\subsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classORB__SLAM2_1_1LocalMapping_a27db88f75fe6f2bd43b0bd0769d56462}{Check\-New\-Key\-Frames} ()
\begin{DoxyCompactList}\small\item\em 查看列表中是否有等待被插入的关键帧 \end{DoxyCompactList}\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_a84eea8f268cce9d919a4906ae634dd22}{Process\-New\-Key\-Frame} ()
\begin{DoxyCompactList}\small\item\em 处理列表中的关键帧 \end{DoxyCompactList}\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_ac06b513357429d9eff89e29d2ae58d6c}{Create\-New\-Map\-Points} ()
\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_acbbb8f04b15e3250e0e24070825d19ae}{Map\-Point\-Culling} ()
\begin{DoxyCompactList}\small\item\em 剔除\-Process\-New\-Key\-Frame和\-Create\-New\-Map\-Points函数中引入的质量不好的\-Map\-Points \end{DoxyCompactList}\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_a5d5e0bc6fd15d9a6bf1ca8a258f104f1}{Search\-In\-Neighbors} ()
\item 
void \hyperlink{classORB__SLAM2_1_1LocalMapping_aca73e5b4bace436b235dfa9c9a522b19}{Key\-Frame\-Culling} ()
\begin{DoxyCompactList}\small\item\em 关键帧剔除 \end{DoxyCompactList}\item 
cv\-::\-Mat \hyperlink{classORB__SLAM2_1_1LocalMapping_ac72419089ac268253671b8da2ec12c21}{Compute\-F12} (\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$\&p\-K\-F1, \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$\&p\-K\-F2)
\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a4c5c0c57b580767a1dd642d77ad8179a}{cv\-::\-Mat {\bfseries Skew\-Symmetric\-Matrix} (const cv\-::\-Mat \&v)}\label{classORB__SLAM2_1_1LocalMapping_a4c5c0c57b580767a1dd642d77ad8179a}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a3fe34beadb62eaa9446c96d27a5d12c9}{void {\bfseries Reset\-If\-Requested} ()}\label{classORB__SLAM2_1_1LocalMapping_a3fe34beadb62eaa9446c96d27a5d12c9}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a872cbbdab3f88ffc2d9d395ef2cf0e8d}{bool {\bfseries Check\-Finish} ()}\label{classORB__SLAM2_1_1LocalMapping_a872cbbdab3f88ffc2d9d395ef2cf0e8d}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a1a6e5b76640d7584b749567d0328ccdc}{void {\bfseries Set\-Finish} ()}\label{classORB__SLAM2_1_1LocalMapping_a1a6e5b76640d7584b749567d0328ccdc}

\end{DoxyCompactItemize}
\subsection*{Protected 属性}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a809e1936f5670dba26908ae3cd165f13}{bool {\bfseries mb\-Monocular}}\label{classORB__SLAM2_1_1LocalMapping_a809e1936f5670dba26908ae3cd165f13}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ab3d831745749531e0bfa92b59e3da66e}{bool {\bfseries mb\-Reset\-Requested}}\label{classORB__SLAM2_1_1LocalMapping_ab3d831745749531e0bfa92b59e3da66e}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_acf229cc6cbbc4e50f0494946038a0ce8}{std\-::mutex {\bfseries m\-Mutex\-Reset}}\label{classORB__SLAM2_1_1LocalMapping_acf229cc6cbbc4e50f0494946038a0ce8}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a761d63d4351faa22012420d635829df1}{bool {\bfseries mb\-Finish\-Requested}}\label{classORB__SLAM2_1_1LocalMapping_a761d63d4351faa22012420d635829df1}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a3494232f3f8f3b3dc25dd0da44ad4014}{bool {\bfseries mb\-Finished}}\label{classORB__SLAM2_1_1LocalMapping_a3494232f3f8f3b3dc25dd0da44ad4014}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ae067c33c891cb04e9cb8557ab4d7df33}{std\-::mutex {\bfseries m\-Mutex\-Finish}}\label{classORB__SLAM2_1_1LocalMapping_ae067c33c891cb04e9cb8557ab4d7df33}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a7ca97c0d4a6064148315589cc96a3302}{\hyperlink{classORB__SLAM2_1_1Map}{Map} $\ast$ {\bfseries mp\-Map}}\label{classORB__SLAM2_1_1LocalMapping_a7ca97c0d4a6064148315589cc96a3302}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ac71702f1061f82c457276c014eebc784}{\hyperlink{classORB__SLAM2_1_1LoopClosing}{Loop\-Closing} $\ast$ {\bfseries mp\-Loop\-Closer}}\label{classORB__SLAM2_1_1LocalMapping_ac71702f1061f82c457276c014eebc784}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a6b4d311f49979f38d47ed96290255a2f}{\hyperlink{classORB__SLAM2_1_1Tracking}{Tracking} $\ast$ {\bfseries mp\-Tracker}}\label{classORB__SLAM2_1_1LocalMapping_a6b4d311f49979f38d47ed96290255a2f}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a4a365466d11db0f8e8fc14d76fc0cd83}{std\-::list$<$ \hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$ $>$ \hyperlink{classORB__SLAM2_1_1LocalMapping_a4a365466d11db0f8e8fc14d76fc0cd83}{ml\-New\-Key\-Frames}}\label{classORB__SLAM2_1_1LocalMapping_a4a365466d11db0f8e8fc14d76fc0cd83}

\begin{DoxyCompactList}\small\item\em 等待处理的关键帧列表 \end{DoxyCompactList}\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a1e4de53f96e97c6b94b794d0a5bc67e3}{\hyperlink{classORB__SLAM2_1_1KeyFrame}{Key\-Frame} $\ast$ {\bfseries mp\-Current\-Key\-Frame}}\label{classORB__SLAM2_1_1LocalMapping_a1e4de53f96e97c6b94b794d0a5bc67e3}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_afd75991c0499447411a3bd304cc9fa13}{std\-::list$<$ \hyperlink{classORB__SLAM2_1_1MapPoint}{Map\-Point} $\ast$ $>$ {\bfseries mlp\-Recent\-Added\-Map\-Points}}\label{classORB__SLAM2_1_1LocalMapping_afd75991c0499447411a3bd304cc9fa13}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a970bb666e27d4e801453e9fc26e779a1}{std\-::mutex {\bfseries m\-Mutex\-New\-K\-Fs}}\label{classORB__SLAM2_1_1LocalMapping_a970bb666e27d4e801453e9fc26e779a1}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a2d9c44abf1b175880ea418cfc404be87}{bool {\bfseries mb\-Abort\-B\-A}}\label{classORB__SLAM2_1_1LocalMapping_a2d9c44abf1b175880ea418cfc404be87}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ada6ab808ccb95293baec4219ac59ca87}{bool {\bfseries mb\-Stopped}}\label{classORB__SLAM2_1_1LocalMapping_ada6ab808ccb95293baec4219ac59ca87}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_af38a9dca4bb96b7ae1711336596a609a}{bool {\bfseries mb\-Stop\-Requested}}\label{classORB__SLAM2_1_1LocalMapping_af38a9dca4bb96b7ae1711336596a609a}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ad68f6c709f31a5dfca64b24967cc77f2}{bool {\bfseries mb\-Not\-Stop}}\label{classORB__SLAM2_1_1LocalMapping_ad68f6c709f31a5dfca64b24967cc77f2}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a06f6b4e0e86ca4d311542dec5039d54a}{std\-::mutex {\bfseries m\-Mutex\-Stop}}\label{classORB__SLAM2_1_1LocalMapping_a06f6b4e0e86ca4d311542dec5039d54a}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_ade846d251f505560c45d109c348b39e5}{bool {\bfseries mb\-Accept\-Key\-Frames}}\label{classORB__SLAM2_1_1LocalMapping_ade846d251f505560c45d109c348b39e5}

\item 
\hypertarget{classORB__SLAM2_1_1LocalMapping_a8668b51cf81fdfde9fd5ee61bd936a19}{std\-::mutex {\bfseries m\-Mutex\-Accept}}\label{classORB__SLAM2_1_1LocalMapping_a8668b51cf81fdfde9fd5ee61bd936a19}

\end{DoxyCompactItemize}


\subsection{详细描述}


在文件 Local\-Mapping.\-h 第 40 行定义.



\subsection{成员函数说明}
\hypertarget{classORB__SLAM2_1_1LocalMapping_a27db88f75fe6f2bd43b0bd0769d56462}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Check\-New\-Key\-Frames@{Check\-New\-Key\-Frames}}
\index{Check\-New\-Key\-Frames@{Check\-New\-Key\-Frames}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Check\-New\-Key\-Frames}]{\setlength{\rightskip}{0pt plus 5cm}bool O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Check\-New\-Key\-Frames (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_a27db88f75fe6f2bd43b0bd0769d56462}


查看列表中是否有等待被插入的关键帧 

\begin{DoxyReturn}{返回}
如果存在，返回true 
\end{DoxyReturn}


在文件 Local\-Mapping.\-cpp 第 157 行定义.



参考 ml\-New\-Key\-Frames.



参考自 Create\-New\-Map\-Points().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_a27db88f75fe6f2bd43b0bd0769d56462_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_ac72419089ac268253671b8da2ec12c21}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Compute\-F12@{Compute\-F12}}
\index{Compute\-F12@{Compute\-F12}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Compute\-F12}]{\setlength{\rightskip}{0pt plus 5cm}cv\-::\-Mat O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Compute\-F12 (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$\&}]{p\-K\-F1, }
\item[{{\bf Key\-Frame} $\ast$\&}]{p\-K\-F2}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_ac72419089ac268253671b8da2ec12c21}
根据两关键帧的姿态计算两个关键帧之间的基本矩阵 
\begin{DoxyParams}{参数}
{\em p\-K\-F1} & 关键帧1 \\
\hline
{\em p\-K\-F2} & 关键帧2 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
基本矩阵 
\end{DoxyReturn}
1对2的旋转=1对世界的旋转$\ast$世界对2的旋转。

t1w-\/\-R12$\ast$t2w;;;把t1固定，t2先旋转，完了再互相减，

反对称矩阵！！ 

在文件 Local\-Mapping.\-cpp 第 697 行定义.



参考自 Create\-New\-Map\-Points().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_ac72419089ac268253671b8da2ec12c21_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_ac06b513357429d9eff89e29d2ae58d6c}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Create\-New\-Map\-Points@{Create\-New\-Map\-Points}}
\index{Create\-New\-Map\-Points@{Create\-New\-Map\-Points}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Create\-New\-Map\-Points}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Create\-New\-Map\-Points (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_ac06b513357429d9eff89e29d2ae58d6c}
相机运动过程中和共视程度比较高的关键帧通过三角化恢复出一些\-Map\-Points 

在文件 Local\-Mapping.\-cpp 第 286 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-::\-Add\-Map\-Point(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Add\-Map\-Point(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Add\-Observation(), Check\-New\-Key\-Frames(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Compute\-Distinctive\-Descriptors(), Compute\-F12(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Compute\-Scene\-Median\-Depth(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Best\-Covisibility\-Key\-Frames(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Search\-For\-Triangulation(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Unproject\-Stereo() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Update\-Normal\-And\-Depth().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_ac06b513357429d9eff89e29d2ae58d6c_cgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_af2d70466a1a217fb7e55d874931ce688}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Insert\-Key\-Frame@{Insert\-Key\-Frame}}
\index{Insert\-Key\-Frame@{Insert\-Key\-Frame}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Insert\-Key\-Frame}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Insert\-Key\-Frame (
\begin{DoxyParamCaption}
\item[{{\bf Key\-Frame} $\ast$}]{p\-K\-F}
\end{DoxyParamCaption}
)}}\label{classORB__SLAM2_1_1LocalMapping_af2d70466a1a217fb7e55d874931ce688}


插入关键帧 

将关键帧插入到地图中，以便将来进行局部地图优化 这里仅仅是将关键帧插入到列表中进行等待 
\begin{DoxyParams}{参数}
{\em p\-K\-F} & Key\-Frame在tracking.\-cpp的create\-New\-Key\-Frame函数中就有引用 \\
\hline
\end{DoxyParams}


在文件 Local\-Mapping.\-cpp 第 145 行定义.



参考 ml\-New\-Key\-Frames.



参考自 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-Initial\-Map\-Monocular(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Create\-New\-Key\-Frame() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Tracking\-::\-Stereo\-Initialization().



这是这个函数的调用关系图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_af2d70466a1a217fb7e55d874931ce688_icgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_aca73e5b4bace436b235dfa9c9a522b19}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Key\-Frame\-Culling@{Key\-Frame\-Culling}}
\index{Key\-Frame\-Culling@{Key\-Frame\-Culling}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Key\-Frame\-Culling}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Key\-Frame\-Culling (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_aca73e5b4bace436b235dfa9c9a522b19}


关键帧剔除 

在\-Covisibility Graph中的关键帧，其90以上的\-Map\-Points能被其他关键帧（至少3个）观测到，则认为该关键帧为冗余关键帧。 \begin{DoxySeeAlso}{参见}
V\-I-\/\-E Local Keyframe Culling 
\end{DoxySeeAlso}


在文件 Local\-Mapping.\-cpp 第 802 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Map\-Point\-Matches() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Vector\-Covisible\-Key\-Frames().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_aca73e5b4bace436b235dfa9c9a522b19_cgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_acbbb8f04b15e3250e0e24070825d19ae}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Map\-Point\-Culling@{Map\-Point\-Culling}}
\index{Map\-Point\-Culling@{Map\-Point\-Culling}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Map\-Point\-Culling}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Map\-Point\-Culling (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_acbbb8f04b15e3250e0e24070825d19ae}


剔除\-Process\-New\-Key\-Frame和\-Create\-New\-Map\-Points函数中引入的质量不好的\-Map\-Points 

\begin{DoxySeeAlso}{参见}
V\-I-\/\-B recent map points culling 
\end{DoxySeeAlso}


在文件 Local\-Mapping.\-cpp 第 235 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::mn\-First\-K\-Fid.

\hypertarget{classORB__SLAM2_1_1LocalMapping_a84eea8f268cce9d919a4906ae634dd22}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Process\-New\-Key\-Frame@{Process\-New\-Key\-Frame}}
\index{Process\-New\-Key\-Frame@{Process\-New\-Key\-Frame}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Process\-New\-Key\-Frame}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Process\-New\-Key\-Frame (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_a84eea8f268cce9d919a4906ae634dd22}


处理列表中的关键帧 


\begin{DoxyItemize}
\item 计算\-Bow，加速三角化新的\-Map\-Points
\item 关联当前关键帧至\-Map\-Points，并更新\-Map\-Points的平均观测方向和观测距离范围
\item 插入关键帧，更新\-Covisibility图和\-Essential图 \begin{DoxySeeAlso}{参见}
V\-I-\/\-A keyframe insertion 
\end{DoxySeeAlso}

\end{DoxyItemize}

在文件 Local\-Mapping.\-cpp 第 171 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-::\-Add\-Key\-Frame(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Add\-Observation(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Compute\-Bo\-W(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Compute\-Distinctive\-Descriptors(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Map\-Point\-Matches(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Is\-In\-Key\-Frame(), ml\-New\-Key\-Frames, O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Update\-Connections() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Update\-Normal\-And\-Depth().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_a84eea8f268cce9d919a4906ae634dd22_cgraph}
\end{center}
\end{figure}


\hypertarget{classORB__SLAM2_1_1LocalMapping_a5d5e0bc6fd15d9a6bf1ca8a258f104f1}{\index{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}!Search\-In\-Neighbors@{Search\-In\-Neighbors}}
\index{Search\-In\-Neighbors@{Search\-In\-Neighbors}!ORB_SLAM2::LocalMapping@{O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping}}
\subsubsection[{Search\-In\-Neighbors}]{\setlength{\rightskip}{0pt plus 5cm}void O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Local\-Mapping\-::\-Search\-In\-Neighbors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classORB__SLAM2_1_1LocalMapping_a5d5e0bc6fd15d9a6bf1ca8a258f104f1}
检查并融合当前关键帧与相邻帧（两级相邻）重复的\-Map\-Points 

在文件 Local\-Mapping.\-cpp 第 588 行定义.



参考 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Compute\-Distinctive\-Descriptors(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-O\-R\-Bmatcher\-::\-Fuse(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Best\-Covisibility\-Key\-Frames(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Get\-Map\-Point\-Matches(), O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Key\-Frame\-::\-Update\-Connections() , 以及 O\-R\-B\-\_\-\-S\-L\-A\-M2\-::\-Map\-Point\-::\-Update\-Normal\-And\-Depth().



函数调用图\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classORB__SLAM2_1_1LocalMapping_a5d5e0bc6fd15d9a6bf1ca8a258f104f1_cgraph}
\end{center}
\end{figure}




该类的文档由以下文件生成\-:\begin{DoxyCompactItemize}
\item 
include/Local\-Mapping.\-h\item 
src/Local\-Mapping.\-cpp\end{DoxyCompactItemize}
