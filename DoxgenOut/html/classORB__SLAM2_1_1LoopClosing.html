<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>My Project: ORB_SLAM2::LoopClosing类 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="modules.html"><span>模块</span></a></li>
      <li><a href="namespaces.html"><span>命名空间</span></a></li>
      <li class="current"><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>类列表</span></a></li>
      <li><a href="classes.html"><span>类索引</span></a></li>
      <li><a href="inherits.html"><span>类继承关系</span></a></li>
      <li><a href="functions.html"><span>类成员</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classORB__SLAM2_1_1LoopClosing.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>命名空间</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>文件</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>类型定义</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>枚举</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>友元</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>组</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>页</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public 类型</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pro-methods">Protected 成员函数</a> &#124;
<a href="#pro-attribs">Protected 属性</a> &#124;
<a href="classORB__SLAM2_1_1LoopClosing-members.html">所有成员列表</a>  </div>
  <div class="headertitle">
<div class="title">ORB_SLAM2::LoopClosing类 参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
ORB_SLAM2::LoopClosing 的协作图:</div>
<div class="dyncontent">
<div class="center"><img src="classORB__SLAM2_1_1LoopClosing__coll__graph.png" border="0" usemap="#ORB__SLAM2_1_1LoopClosing_coll__map" alt="Collaboration graph"/></div>
<map name="ORB__SLAM2_1_1LoopClosing_coll__map" id="ORB__SLAM2_1_1LoopClosing_coll__map">
<area shape="rect" id="node12" href="classORB__SLAM2_1_1LocalMapping.html" title="ORB_SLAM2::LocalMapping" alt="" coords="1853,359,2043,385"/><area shape="rect" id="node13" href="classORB__SLAM2_1_1Tracking.html" title="ORB_SLAM2::Tracking" alt="" coords="2190,443,2349,469"/><area shape="rect" id="node2" href="classORB__SLAM2_1_1KeyFrameDatabase.html" title="ORB_SLAM2::KeyFrameDatabase" alt="" coords="630,501,855,528"/><area shape="rect" id="node5" href="classORB__SLAM2_1_1KeyFrame.html" title="ORB_SLAM2::KeyFrame" alt="" coords="1031,591,1201,617"/><area shape="rect" id="node3" href="classDBoW2_1_1TemplatedVocabulary.html" title="Generic Vocabulary. " alt="" coords="329,494,532,535"/><area shape="rect" id="node17" href="classORB__SLAM2_1_1Frame.html" title="ORB_SLAM2::Frame" alt="" coords="1465,705,1612,732"/><area shape="rect" id="node4" href="classDBoW2_1_1GeneralScoring.html" title="Base class of scoring functions. " alt="" coords="5,501,171,528"/><area shape="rect" id="node6" href="classORB__SLAM2_1_1Map.html" title="ORB_SLAM2::Map" alt="" coords="675,196,810,223"/><area shape="rect" id="node14" href="classORB__SLAM2_1_1FrameDrawer.html" title="ORB_SLAM2::FrameDrawer" alt="" coords="1235,57,1423,84"/><area shape="rect" id="node16" href="classORB__SLAM2_1_1MapDrawer.html" title="ORB_SLAM2::MapDrawer" alt="" coords="1653,109,1829,136"/><area shape="rect" id="node7" href="classDBoW2_1_1FeatureVector.html" title="Vector of nodes with indexes of local features。正索引，node，对应的特征的标号 " alt="" coords="663,711,822,737"/><area shape="rect" id="node9" href="classDBoW2_1_1BowVector.html" title="DBoW2::BowVector" alt="" coords="673,777,813,804"/><area shape="rect" id="node11" href="structg2o_1_1Sim3.html" title="g2o::Sim3" alt="" coords="1075,335,1157,361"/><area shape="rect" id="node15" href="classORB__SLAM2_1_1Initializer.html" title="单目SLAM初始化相关，双目和RGBD不会使用这个类 " alt="" coords="1867,555,2029,581"/><area shape="rect" id="node18" href="classORB__SLAM2_1_1ORBextractor.html" title="ORB_SLAM2::ORBextractor" alt="" coords="1021,837,1211,864"/><area shape="rect" id="node19" href="classORB__SLAM2_1_1Viewer.html" title="ORB_SLAM2::Viewer" alt="" coords="1873,889,2023,916"/><area shape="rect" id="node20" href="classORB__SLAM2_1_1System.html" title="ORB_SLAM2::System" alt="" coords="1871,940,2025,967"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public 类型</h2></td></tr>
<tr class="memitem:a8efed418be885643d3c43113ff1d7bb2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8efed418be885643d3c43113ff1d7bb2"></a>
typedef pair&lt; set&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> * &gt;<br class="typebreak"/>
, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>ConsistentGroup</b></td></tr>
<tr class="separator:a8efed418be885643d3c43113ff1d7bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9ada143a8308ce32990a7c7b5d533ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9ada143a8308ce32990a7c7b5d533ab"></a>
typedef map&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> <br class="typebreak"/>
*, <a class="el" href="structg2o_1_1Sim3.html">g2o::Sim3</a>, std::less<br class="typebreak"/>
&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> * &gt;<br class="typebreak"/>
, Eigen::aligned_allocator<br class="typebreak"/>
&lt; std::pair&lt; const <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> <br class="typebreak"/>
*, <a class="el" href="structg2o_1_1Sim3.html">g2o::Sim3</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>KeyFrameAndPose</b></td></tr>
<tr class="separator:ae9ada143a8308ce32990a7c7b5d533ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:af5f7b8a43efa8bc771a5227ed2fbf460"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5f7b8a43efa8bc771a5227ed2fbf460"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LoopClosing</b> (<a class="el" href="classORB__SLAM2_1_1Map.html">Map</a> *pMap, <a class="el" href="classORB__SLAM2_1_1KeyFrameDatabase.html">KeyFrameDatabase</a> *pDB, <a class="el" href="classDBoW2_1_1TemplatedVocabulary.html">ORBVocabulary</a> *pVoc, const bool bFixScale)</td></tr>
<tr class="separator:af5f7b8a43efa8bc771a5227ed2fbf460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20bce54d19c979511043d7c109aa741a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20bce54d19c979511043d7c109aa741a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetTracker</b> (<a class="el" href="classORB__SLAM2_1_1Tracking.html">Tracking</a> *pTracker)</td></tr>
<tr class="separator:a20bce54d19c979511043d7c109aa741a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27124f61055c2b5f53497e918195269"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa27124f61055c2b5f53497e918195269"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetLocalMapper</b> (<a class="el" href="classORB__SLAM2_1_1LocalMapping.html">LocalMapping</a> *pLocalMapper)</td></tr>
<tr class="separator:aa27124f61055c2b5f53497e918195269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520014f22059056d6256476bccb04471"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a520014f22059056d6256476bccb04471"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Run</b> ()</td></tr>
<tr class="separator:a520014f22059056d6256476bccb04471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680d0b255d764754841e622f5af97473"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a680d0b255d764754841e622f5af97473"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>InsertKeyFrame</b> (<a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> *pKF)</td></tr>
<tr class="separator:a680d0b255d764754841e622f5af97473"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc868b9f4b8381a94aae2c85bfec3c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7dc868b9f4b8381a94aae2c85bfec3c5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>RequestReset</b> ()</td></tr>
<tr class="separator:a7dc868b9f4b8381a94aae2c85bfec3c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b10a9c18541818c9490a62447ef7f18"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b10a9c18541818c9490a62447ef7f18"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>RunGlobalBundleAdjustment</b> (unsigned long nLoopKF)</td></tr>
<tr class="separator:a4b10a9c18541818c9490a62447ef7f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddc6674aa54db7d38946f73eb9776f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ddc6674aa54db7d38946f73eb9776f2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isRunningGBA</b> ()</td></tr>
<tr class="separator:a4ddc6674aa54db7d38946f73eb9776f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8efb239cd4b488b12e7f1223c308a4e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa8efb239cd4b488b12e7f1223c308a4e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isFinishedGBA</b> ()</td></tr>
<tr class="separator:aa8efb239cd4b488b12e7f1223c308a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa271039dcafe7cc053f72ba541bc499b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa271039dcafe7cc053f72ba541bc499b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>RequestFinish</b> ()</td></tr>
<tr class="separator:aa271039dcafe7cc053f72ba541bc499b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac242214c60ed66e9432e0457e3fc29ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac242214c60ed66e9432e0457e3fc29ad"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isFinished</b> ()</td></tr>
<tr class="separator:ac242214c60ed66e9432e0457e3fc29ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected 成员函数</h2></td></tr>
<tr class="memitem:ac0c81e654509eb9384abe5e769db4f41"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classORB__SLAM2_1_1LoopClosing.html#ac0c81e654509eb9384abe5e769db4f41">CheckNewKeyFrames</a> ()</td></tr>
<tr class="separator:ac0c81e654509eb9384abe5e769db4f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8110ca79cebaf509e378d30e55f1381"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classORB__SLAM2_1_1LoopClosing.html#aa8110ca79cebaf509e378d30e55f1381">DetectLoop</a> ()</td></tr>
<tr class="separator:aa8110ca79cebaf509e378d30e55f1381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4fcf814eed5b5dd2aec96454561b078"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classORB__SLAM2_1_1LoopClosing.html#ab4fcf814eed5b5dd2aec96454561b078">ComputeSim3</a> ()</td></tr>
<tr class="memdesc:ab4fcf814eed5b5dd2aec96454561b078"><td class="mdescLeft">&#160;</td><td class="mdescRight">计算当前帧与闭环帧的Sim3变换等  <a href="#ab4fcf814eed5b5dd2aec96454561b078">更多...</a><br/></td></tr>
<tr class="separator:ab4fcf814eed5b5dd2aec96454561b078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe9d9b913f36b607c67b0ed0df42a1d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabe9d9b913f36b607c67b0ed0df42a1d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SearchAndFuse</b> (const KeyFrameAndPose &amp;CorrectedPosesMap)</td></tr>
<tr class="separator:aabe9d9b913f36b607c67b0ed0df42a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa007e0678582ec0de5d71280d23af540"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classORB__SLAM2_1_1LoopClosing.html#aa007e0678582ec0de5d71280d23af540">CorrectLoop</a> ()</td></tr>
<tr class="memdesc:aa007e0678582ec0de5d71280d23af540"><td class="mdescLeft">&#160;</td><td class="mdescRight">闭环  <a href="#aa007e0678582ec0de5d71280d23af540">更多...</a><br/></td></tr>
<tr class="separator:aa007e0678582ec0de5d71280d23af540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288545384b48c758f910a4762c873733"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a288545384b48c758f910a4762c873733"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ResetIfRequested</b> ()</td></tr>
<tr class="separator:a288545384b48c758f910a4762c873733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13b01270b4daef9be2a098f82e9f64f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac13b01270b4daef9be2a098f82e9f64f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>CheckFinish</b> ()</td></tr>
<tr class="separator:ac13b01270b4daef9be2a098f82e9f64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea102bfacf8538ef605d76e4192a622"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeea102bfacf8538ef605d76e4192a622"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetFinish</b> ()</td></tr>
<tr class="separator:aeea102bfacf8538ef605d76e4192a622"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected 属性</h2></td></tr>
<tr class="memitem:ae9bac1131984f7915ab1fdf220912b0b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9bac1131984f7915ab1fdf220912b0b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbResetRequested</b></td></tr>
<tr class="separator:ae9bac1131984f7915ab1fdf220912b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979cad182a7f7bb08be165304d93106b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a979cad182a7f7bb08be165304d93106b"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>mMutexReset</b></td></tr>
<tr class="separator:a979cad182a7f7bb08be165304d93106b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3dfbee3d1635fe11e600f94b0f60dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e3dfbee3d1635fe11e600f94b0f60dc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbFinishRequested</b></td></tr>
<tr class="separator:a9e3dfbee3d1635fe11e600f94b0f60dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d8de49d49b647c33f3616f4cc95c42c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d8de49d49b647c33f3616f4cc95c42c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbFinished</b></td></tr>
<tr class="separator:a6d8de49d49b647c33f3616f4cc95c42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bdc72e69885435e1c4f39b759c2ec8d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bdc72e69885435e1c4f39b759c2ec8d"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>mMutexFinish</b></td></tr>
<tr class="separator:a2bdc72e69885435e1c4f39b759c2ec8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b1dabf1326afa9d6a28768fd6f498b4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b1dabf1326afa9d6a28768fd6f498b4"></a>
<a class="el" href="classORB__SLAM2_1_1Map.html">Map</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpMap</b></td></tr>
<tr class="separator:a0b1dabf1326afa9d6a28768fd6f498b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3bff69250ab812292fb0a0e59cd3076"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3bff69250ab812292fb0a0e59cd3076"></a>
<a class="el" href="classORB__SLAM2_1_1Tracking.html">Tracking</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpTracker</b></td></tr>
<tr class="separator:ac3bff69250ab812292fb0a0e59cd3076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc11ebe6d60187d4d1708932bbb52f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5bc11ebe6d60187d4d1708932bbb52f6"></a>
<a class="el" href="classORB__SLAM2_1_1KeyFrameDatabase.html">KeyFrameDatabase</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpKeyFrameDB</b></td></tr>
<tr class="separator:a5bc11ebe6d60187d4d1708932bbb52f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d1b37eb70edbc013a431d92a4d86d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9d1b37eb70edbc013a431d92a4d86d1"></a>
<a class="el" href="classDBoW2_1_1TemplatedVocabulary.html">ORBVocabulary</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpORBVocabulary</b></td></tr>
<tr class="separator:ac9d1b37eb70edbc013a431d92a4d86d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eaa1b6d507d9bd138ab0f10a308e3c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5eaa1b6d507d9bd138ab0f10a308e3c9"></a>
<a class="el" href="classORB__SLAM2_1_1LocalMapping.html">LocalMapping</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpLocalMapper</b></td></tr>
<tr class="separator:a5eaa1b6d507d9bd138ab0f10a308e3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b5b9bb2ba5e3fe79428e4af9a002025"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b5b9bb2ba5e3fe79428e4af9a002025"></a>
std::list&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mlpLoopKeyFrameQueue</b></td></tr>
<tr class="separator:a4b5b9bb2ba5e3fe79428e4af9a002025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c28fbf7b84469cd14b12f511d499533"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c28fbf7b84469cd14b12f511d499533"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>mMutexLoopQueue</b></td></tr>
<tr class="separator:a3c28fbf7b84469cd14b12f511d499533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c93c677c23ca7bf62a2a9652c008ff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78c93c677c23ca7bf62a2a9652c008ff"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>mnCovisibilityConsistencyTh</b></td></tr>
<tr class="separator:a78c93c677c23ca7bf62a2a9652c008ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6bc1810ef5921462ebdeee32508118"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b6bc1810ef5921462ebdeee32508118"></a>
<a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpCurrentKF</b></td></tr>
<tr class="separator:a4b6bc1810ef5921462ebdeee32508118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d45d3e2f0a8e0c9797079b9ae4ea37"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53d45d3e2f0a8e0c9797079b9ae4ea37"></a>
<a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>mpMatchedKF</b></td></tr>
<tr class="separator:a53d45d3e2f0a8e0c9797079b9ae4ea37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede54de0cb62136859ccb297e890f573"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aede54de0cb62136859ccb297e890f573"></a>
std::vector&lt; ConsistentGroup &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mvConsistentGroups</b></td></tr>
<tr class="separator:aede54de0cb62136859ccb297e890f573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac545f793bc68348fea584022d1daa609"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac545f793bc68348fea584022d1daa609"></a>
std::vector&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mvpEnoughConsistentCandidates</b></td></tr>
<tr class="separator:ac545f793bc68348fea584022d1daa609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9595220811b5b814d1413451ecbaa4d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9595220811b5b814d1413451ecbaa4d"></a>
std::vector&lt; <a class="el" href="classORB__SLAM2_1_1KeyFrame.html">KeyFrame</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mvpCurrentConnectedKFs</b></td></tr>
<tr class="separator:ad9595220811b5b814d1413451ecbaa4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd07791eb7a84ea2de2ab9d88e32d4dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd07791eb7a84ea2de2ab9d88e32d4dc"></a>
std::vector&lt; <a class="el" href="classORB__SLAM2_1_1MapPoint.html">MapPoint</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mvpCurrentMatchedPoints</b></td></tr>
<tr class="separator:afd07791eb7a84ea2de2ab9d88e32d4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52778b54f944bab5a3580b82233e8c72"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52778b54f944bab5a3580b82233e8c72"></a>
std::vector&lt; <a class="el" href="classORB__SLAM2_1_1MapPoint.html">MapPoint</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mvpLoopMapPoints</b></td></tr>
<tr class="separator:a52778b54f944bab5a3580b82233e8c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb5a5f8a46de211d46aaa6129385ac2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abbb5a5f8a46de211d46aaa6129385ac2"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><b>mScw</b></td></tr>
<tr class="separator:abbb5a5f8a46de211d46aaa6129385ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea331d48d572c8e269c90d35c0de1e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ea331d48d572c8e269c90d35c0de1e7"></a>
<a class="el" href="structg2o_1_1Sim3.html">g2o::Sim3</a>&#160;</td><td class="memItemRight" valign="bottom"><b>mg2oScw</b></td></tr>
<tr class="separator:a9ea331d48d572c8e269c90d35c0de1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6ee027c2c4c45fcd3811819c22953a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a6ee027c2c4c45fcd3811819c22953a"></a>
long unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>mLastLoopKFid</b></td></tr>
<tr class="separator:a6a6ee027c2c4c45fcd3811819c22953a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04c8ddd2135b81fabfa45891ab66add"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad04c8ddd2135b81fabfa45891ab66add"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbRunningGBA</b></td></tr>
<tr class="separator:ad04c8ddd2135b81fabfa45891ab66add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdfbeff51644bd4c3d2d54c637d95e6c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acdfbeff51644bd4c3d2d54c637d95e6c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbFinishedGBA</b></td></tr>
<tr class="separator:acdfbeff51644bd4c3d2d54c637d95e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e24710761d1788f395fafc16a1a8e80"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e24710761d1788f395fafc16a1a8e80"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbStopGBA</b></td></tr>
<tr class="separator:a7e24710761d1788f395fafc16a1a8e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6e898fe4e8e5f680f840d746fa5565"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e6e898fe4e8e5f680f840d746fa5565"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><b>mMutexGBA</b></td></tr>
<tr class="separator:a5e6e898fe4e8e5f680f840d746fa5565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb14401ffb2cafdcef9f0a0323db6296"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb14401ffb2cafdcef9f0a0323db6296"></a>
std::thread *&#160;</td><td class="memItemRight" valign="bottom"><b>mpThreadGBA</b></td></tr>
<tr class="separator:aeb14401ffb2cafdcef9f0a0323db6296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11865c48bbad102b5177e4350de71bd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11865c48bbad102b5177e4350de71bd4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mbFixScale</b></td></tr>
<tr class="separator:a11865c48bbad102b5177e4350de71bd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f6cde58a060bee5aa6d4e5b8d53cea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52f6cde58a060bee5aa6d4e5b8d53cea"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>mnFullBAIdx</b></td></tr>
<tr class="separator:a52f6cde58a060bee5aa6d4e5b8d53cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock">
<p>在文件 <a class="el" href="LoopClosing_8h_source.html">LoopClosing.h</a> 第 <a class="el" href="LoopClosing_8h_source.html#l00044">44</a> 行定义.</p>
</div><h2 class="groupheader">成员函数说明</h2>
<a class="anchor" id="ac0c81e654509eb9384abe5e769db4f41"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ORB_SLAM2::LoopClosing::CheckNewKeyFrames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>查看列表中是否有等待被插入的关键帧 </p>
<dl class="section return"><dt>返回</dt><dd>如果存在，返回true </dd></dl>

<p>在文件 <a class="el" href="LoopClosing_8cpp_source.html">LoopClosing.cpp</a> 第 <a class="el" href="LoopClosing_8cpp_source.html#l00106">106</a> 行定义.</p>

</div>
</div>
<a class="anchor" id="ab4fcf814eed5b5dd2aec96454561b078"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ORB_SLAM2::LoopClosing::ComputeSim3 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>计算当前帧与闭环帧的Sim3变换等 </p>
<ol type="1">
<li>通过Bow加速描述子的匹配，利用RANSAC粗略地计算出当前帧与闭环帧的Sim3（当前帧&mdash;闭环帧）</li>
<li>根据估计的Sim3，对3D点进行投影找到更多匹配，通过优化的方法计算更精确的Sim3（当前帧&mdash;闭环帧）</li>
<li>将闭环帧以及闭环帧相连的关键帧的MapPoints与当前帧的点进行匹配（当前帧&mdash;闭环帧+相连关键帧）</li>
</ol>
<p>注意以上匹配的结果均都存在成员变量mvpCurrentMatchedPoints中， 实际的更新步骤见CorrectLoop()步骤3：Start Loop Fusion </p>

<p>在文件 <a class="el" href="LoopClosing_8cpp_source.html">LoopClosing.cpp</a> 第 <a class="el" href="LoopClosing_8cpp_source.html#l00283">283</a> 行定义.</p>

<p>参考 <a class="el" href="KeyFrame_8cpp_source.html#l00348">ORB_SLAM2::KeyFrame::GetMapPointMatches()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00203">ORB_SLAM2::KeyFrame::GetVectorCovisibleKeyFrames()</a>, <a class="el" href="Optimizer_8cpp_source.html#l01225">ORB_SLAM2::Optimizer::OptimizeSim3()</a>, <a class="el" href="classORB__SLAM2_1_1ORBmatcher.html#ab38a8d3f3803e398c173ef45b25e66d8">ORB_SLAM2::ORBmatcher::SearchByBoW()</a>, <a class="el" href="classORB__SLAM2_1_1ORBmatcher.html#a27c18d6977e8ec20b196e0b2fa6043cd">ORB_SLAM2::ORBmatcher::SearchByProjection()</a> , 以及 <a class="el" href="ORBmatcher_8cpp_source.html#l01259">ORB_SLAM2::ORBmatcher::SearchBySim3()</a>.</p>

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classORB__SLAM2_1_1LoopClosing_ab4fcf814eed5b5dd2aec96454561b078_cgraph.png" border="0" usemap="#classORB__SLAM2_1_1LoopClosing_ab4fcf814eed5b5dd2aec96454561b078_cgraph" alt=""/></div>
<map name="classORB__SLAM2_1_1LoopClosing_ab4fcf814eed5b5dd2aec96454561b078_cgraph" id="classORB__SLAM2_1_1LoopClosing_ab4fcf814eed5b5dd2aec96454561b078_cgraph">
<area shape="rect" id="node2" href="classORB__SLAM2_1_1KeyFrame.html#aabc5f6491c32999d9f546669737547bf" title="Get MapPoint Matches. " alt="" coords="507,5,677,46"/><area shape="rect" id="node3" href="classORB__SLAM2_1_1KeyFrame.html#a9315d396634f6637f70f716336777b8d" title="得到与该关键帧连接的关键帧(已按权值排序) " alt="" coords="235,63,445,105"/><area shape="rect" id="node4" href="classORB__SLAM2_1_1Optimizer.html#ad8fe00ad3e6564b859b07ff9e7b2224e" title="形成闭环时进行Sim3优化 " alt="" coords="257,387,423,429"/><area shape="rect" id="node29" href="classORB__SLAM2_1_1ORBmatcher.html#ab38a8d3f3803e398c173ef45b25e66d8" title="通过词包，对关键帧的特征点进行跟踪 " alt="" coords="247,194,433,235"/><area shape="rect" id="node30" href="classORB__SLAM2_1_1ORBmatcher.html#a27c18d6977e8ec20b196e0b2fa6043cd" title="通过投影，对Local MapPoint进行跟踪 " alt="" coords="247,259,433,301"/><area shape="rect" id="node31" href="classORB__SLAM2_1_1ORBmatcher.html#aa8ab1e3785aad3fa26855a4efccfa565" title="ORB_SLAM2::ORBmatcher\l::SearchBySim3" alt="" coords="247,129,433,170"/><area shape="rect" id="node5" href="classg2o_1_1BaseVertex.html#acb6e8e8f39caa04f62dd93a3dd400e06" title="set the estimate for the vertex also calls updateCache() " alt="" coords="493,187,691,213"/><area shape="rect" id="node6" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac57651173d6ce4bb4eebf8cb1d917551" title="sets the id of the node in the graph be sure that the graph keeps consistent after changing the id ..." alt="" coords="515,238,669,279"/><area shape="rect" id="node7" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af92ef49e1bcd6a8166afa151d367b905" title="true =&gt; this node should be considered fixed during the optimization " alt="" coords="515,303,669,345"/><area shape="rect" id="node8" href="structg2o_1_1OptimizableGraph.html#ae0b93774ce1dfa0dfd501c86ad4f773e" title="g2o::OptimizableGraph\l::addVertex" alt="" coords="515,70,669,111"/><area shape="rect" id="node12" href="structg2o_1_1OptimizableGraph.html#a19e014e8ec2e9a6e894da8c3a8f8e50d" title="returns the vertex number id appropriately casted " alt="" coords="763,154,917,195"/><area shape="rect" id="node13" href="classg2o_1_1HyperGraph_1_1Edge.html#a5e957658d6e65c49b81197d052a7f16f" title="g2o::HyperGraph::Edge\l::setVertex" alt="" coords="513,471,671,513"/><area shape="rect" id="node14" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a42955172c19f16e2cfbb30d611d1bd87" title="g2o::OptimizableGraph\l::Edge::setRobustKernel" alt="" coords="509,537,675,578"/><area shape="rect" id="node15" href="classg2o_1_1RobustKernelHuber.html#a7e9ee4bbc9483dcd3d10a4c1f506a4d2" title="g2o::RobustKernelHuber\l::setDelta" alt="" coords="509,602,675,643"/><area shape="rect" id="node16" href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070" title="g2o::OptimizableGraph\l::addEdge" alt="" coords="515,667,669,709"/><area shape="rect" id="node24" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae" title="g2o::SparseOptimizer\l::initializeOptimization" alt="" coords="765,665,915,706"/><area shape="rect" id="node25" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930" title="g2o::SparseOptimizer\l::optimize" alt="" coords="518,785,666,826"/><area shape="rect" id="node26" href="classg2o_1_1BaseEdge.html#a7ea9406b8cc06b44433569bbd4fcefac" title="computes the chi2 based on the cached error value, only valid after computeError has been called..." alt="" coords="521,851,663,877"/><area shape="rect" id="node27" href="classg2o_1_1HyperGraph.html#a33e5a60705ce673d647aa1613da9d99b" title="removes a vertex from the graph. Returns true on success (edge was present) " alt="" coords="739,555,941,581"/><area shape="rect" id="node28" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a" title="return the current estimate of the vertex " alt="" coords="503,136,681,163"/><area shape="rect" id="node9" href="classg2o_1_1HyperGraph.html#a7ef87ba3479827b24c6fc29c5fc3aa21" title="g2o::HyperGraph::addVertex" alt="" coords="746,103,934,129"/><area shape="rect" id="node10" href="classg2o_1_1HyperGraph_1_1Vertex.html#ad76b71c368b71971ac5affb5d57183d3" title="returns the id " alt="" coords="990,77,1175,104"/><area shape="rect" id="node11" href="classg2o_1_1HyperGraph.html#ab07fe8bd9982a66ba34e83dff8317ea2" title="returns a vertex id in the hyper&#45;graph, or 0 if the vertex id is not present " alt="" coords="1000,144,1165,171"/><area shape="rect" id="node17" href="classg2o_1_1HyperGraph.html#a0f1d35009a2879b238c8148c33485c89" title="g2o::HyperGraph::addEdge" alt="" coords="750,613,930,640"/><area shape="rect" id="node20" href="classg2o_1_1JacobianWorkspace.html#a2d16ad6db1a51aa93c806cc9c06e223f" title="g2o::JacobianWorkspace\l::updateSize" alt="" coords="755,730,925,771"/><area shape="rect" id="node18" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e" title="returns the set of hyper&#45;edges that are leaving/entering in this vertex " alt="" coords="999,547,1166,589"/><area shape="rect" id="node19" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5" title="g2o::HyperGraph::Edge\l::vertices" alt="" coords="1003,613,1162,654"/><area shape="rect" id="node21" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079" title="dimension of the estimated state belonging to this node " alt="" coords="1005,743,1160,785"/><area shape="rect" id="node22" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a90a86891adc47a179a7cd7ef31549916" title="returns the dimensions of the error function " alt="" coords="1005,809,1160,850"/><area shape="rect" id="node23" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311" title="g2o::HyperGraph::Edge\l::vertex" alt="" coords="1003,678,1162,719"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa007e0678582ec0de5d71280d23af540"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ORB_SLAM2::LoopClosing::CorrectLoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>闭环 </p>
<ol type="1">
<li>通过求解的Sim3以及相对姿态关系，调整与当前帧相连的关键帧位姿以及这些关键帧观测到的MapPoints的位置（相连关键帧&mdash;当前帧）</li>
<li>将闭环帧以及闭环帧相连的关键帧的MapPoints和与当前帧相连的关键帧的点进行匹配（相连关键帧+当前帧&mdash;闭环帧+相连关键帧）</li>
<li>通过MapPoints的匹配关系更新这些帧之间的连接关系，即更新covisibility graph</li>
<li>对Essential Graph（Pose Graph）进行优化，MapPoints的位置则根据优化后的位姿做相对应的调整</li>
<li>创建线程进行全局Bundle Adjustment </li>
</ol>

<p>在文件 <a class="el" href="LoopClosing_8cpp_source.html">LoopClosing.cpp</a> 第 <a class="el" href="LoopClosing_8cpp_source.html#l00505">505</a> 行定义.</p>

<p>参考 <a class="el" href="KeyFrame_8cpp_source.html#l00269">ORB_SLAM2::KeyFrame::AddMapPoint()</a>, <a class="el" href="MapPoint_8cpp_source.html#l00127">ORB_SLAM2::MapPoint::AddObservation()</a>, <a class="el" href="MapPoint_8cpp_source.html#l00302">ORB_SLAM2::MapPoint::ComputeDistinctiveDescriptors()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00190">ORB_SLAM2::KeyFrame::GetConnectedKeyFrames()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00348">ORB_SLAM2::KeyFrame::GetMapPointMatches()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00203">ORB_SLAM2::KeyFrame::GetVectorCovisibleKeyFrames()</a>, <a class="el" href="Optimizer_8cpp_source.html#l00905">ORB_SLAM2::Optimizer::OptimizeEssentialGraph()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00369">ORB_SLAM2::KeyFrame::UpdateConnections()</a> , 以及 <a class="el" href="MapPoint_8cpp_source.html#l00414">ORB_SLAM2::MapPoint::UpdateNormalAndDepth()</a>.</p>

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classORB__SLAM2_1_1LoopClosing_aa007e0678582ec0de5d71280d23af540_cgraph.png" border="0" usemap="#classORB__SLAM2_1_1LoopClosing_aa007e0678582ec0de5d71280d23af540_cgraph" alt=""/></div>
<map name="classORB__SLAM2_1_1LoopClosing_aa007e0678582ec0de5d71280d23af540_cgraph" id="classORB__SLAM2_1_1LoopClosing_aa007e0678582ec0de5d71280d23af540_cgraph">
<area shape="rect" id="node2" href="classORB__SLAM2_1_1KeyFrame.html#a16ea4f0cfa1ca411bb3382107fe69d2d" title="Add MapPoint to KeyFrame. " alt="" coords="257,114,426,155"/><area shape="rect" id="node3" href="classORB__SLAM2_1_1MapPoint.html#a37277ee3c7d8657976e749ab920bb13f" title="添加观测 " alt="" coords="259,179,423,221"/><area shape="rect" id="node4" href="classORB__SLAM2_1_1MapPoint.html#ab4c3dfd8f5f05a4b1888021f1fac3d84" title="计算具有代表的描述子 " alt="" coords="235,245,447,286"/><area shape="rect" id="node5" href="classORB__SLAM2_1_1KeyFrame.html#af4ffdf4441477a36c42d6605c573f1cf" title="得到与该关键帧连接的关键帧 " alt="" coords="251,310,432,351"/><area shape="rect" id="node6" href="classORB__SLAM2_1_1KeyFrame.html#aabc5f6491c32999d9f546669737547bf" title="Get MapPoint Matches. " alt="" coords="257,375,426,417"/><area shape="rect" id="node7" href="classORB__SLAM2_1_1KeyFrame.html#a9315d396634f6637f70f716336777b8d" title="得到与该关键帧连接的关键帧(已按权值排序) " alt="" coords="236,441,447,482"/><area shape="rect" id="node8" href="classORB__SLAM2_1_1Optimizer.html#ad36bb1a7167c84f385c3f299bc96f20e" title="闭环检测后，EssentialGraph优化 " alt="" coords="256,506,427,547"/><area shape="rect" id="node34" href="classORB__SLAM2_1_1MapPoint.html#ac5b8e4ec6a7737860af57058bdd16124" title="更新平均观测方向以及观测距离范围 " alt="" coords="510,917,682,958"/><area shape="rect" id="node35" href="classORB__SLAM2_1_1KeyFrame.html#afe7026956c91d4e0a01812be9dc7e8d5" title="更新图的连接 " alt="" coords="257,867,426,909"/><area shape="rect" id="node9" href="classg2o_1_1OptimizationAlgorithmLevenberg.html#a9388e5e7800b18acb0db0a9a7be031a6" title="specify the initial lambda used for the first iteraion, if not given the SparseOptimizer tries to com..." alt="" coords="496,355,696,397"/><area shape="rect" id="node10" href="classg2o_1_1BaseVertex.html#acb6e8e8f39caa04f62dd93a3dd400e06" title="set the estimate for the vertex also calls updateCache() " alt="" coords="497,421,695,448"/><area shape="rect" id="node11" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#af92ef49e1bcd6a8166afa151d367b905" title="true =&gt; this node should be considered fixed during the optimization " alt="" coords="519,473,673,514"/><area shape="rect" id="node12" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#ac57651173d6ce4bb4eebf8cb1d917551" title="sets the id of the node in the graph be sure that the graph keeps consistent after changing the id ..." alt="" coords="519,538,673,579"/><area shape="rect" id="node13" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#afabf1782886c78bf7b312bb1f2c90524" title="true =&gt; this node should be marginalized out during the optimization " alt="" coords="513,603,679,645"/><area shape="rect" id="node14" href="structg2o_1_1OptimizableGraph.html#ae0b93774ce1dfa0dfd501c86ad4f773e" title="g2o::OptimizableGraph\l::addVertex" alt="" coords="519,721,673,762"/><area shape="rect" id="node18" href="structg2o_1_1OptimizableGraph.html#a19e014e8ec2e9a6e894da8c3a8f8e50d" title="returns the vertex number id appropriately casted " alt="" coords="761,662,916,703"/><area shape="rect" id="node19" href="classORB__SLAM2_1_1KeyFrame.html#ab10fd3aab6431face352a930961ff713" title="得到该关键帧与pKF的权重 " alt="" coords="511,786,681,827"/><area shape="rect" id="node20" href="classg2o_1_1HyperGraph_1_1Edge.html#a5e957658d6e65c49b81197d052a7f16f" title="g2o::HyperGraph::Edge\l::setVertex" alt="" coords="517,851,675,893"/><area shape="rect" id="node21" href="classg2o_1_1BaseEdge.html#ab682086df7223ce2b039d652416ddc23" title="information matrix of the constraint " alt="" coords="505,5,687,32"/><area shape="rect" id="node22" href="structg2o_1_1OptimizableGraph.html#a6831ed69fce3dba691f53302a2813070" title="g2o::OptimizableGraph\l::addEdge" alt="" coords="519,107,673,149"/><area shape="rect" id="node30" href="classORB__SLAM2_1_1KeyFrame.html#a7047bffbf130b00dd0270df99874f8a1" title="得到与该关键帧连接的权重大于等于w的关键帧 " alt="" coords="511,173,681,214"/><area shape="rect" id="node31" href="classg2o_1_1SparseOptimizer.html#a56c0c13954ac7204cfb031c141ece9ae" title="g2o::SparseOptimizer\l::initializeOptimization" alt="" coords="763,49,914,90"/><area shape="rect" id="node32" href="classg2o_1_1SparseOptimizer.html#a098257ee6f13dbb79be07075244d9930" title="g2o::SparseOptimizer\l::optimize" alt="" coords="522,238,670,279"/><area shape="rect" id="node33" href="classg2o_1_1BaseVertex.html#abb9caa0d2d00af70e95963a11ee9660a" title="return the current estimate of the vertex " alt="" coords="507,304,685,331"/><area shape="rect" id="node15" href="classg2o_1_1HyperGraph.html#a7ef87ba3479827b24c6fc29c5fc3aa21" title="g2o::HyperGraph::addVertex" alt="" coords="745,728,933,755"/><area shape="rect" id="node16" href="classg2o_1_1HyperGraph_1_1Vertex.html#ad76b71c368b71971ac5affb5d57183d3" title="returns the id " alt="" coords="982,779,1167,805"/><area shape="rect" id="node17" href="classg2o_1_1HyperGraph.html#ab07fe8bd9982a66ba34e83dff8317ea2" title="returns a vertex id in the hyper&#45;graph, or 0 if the vertex id is not present " alt="" coords="992,699,1157,725"/><area shape="rect" id="node23" href="classg2o_1_1HyperGraph.html#a0f1d35009a2879b238c8148c33485c89" title="g2o::HyperGraph::addEdge" alt="" coords="749,115,929,141"/><area shape="rect" id="node26" href="classg2o_1_1JacobianWorkspace.html#a2d16ad6db1a51aa93c806cc9c06e223f" title="g2o::JacobianWorkspace\l::updateSize" alt="" coords="754,170,923,211"/><area shape="rect" id="node24" href="classg2o_1_1HyperGraph_1_1Vertex.html#a0805a5575511327262c89585f1953b8e" title="returns the set of hyper&#45;edges that are leaving/entering in this vertex " alt="" coords="991,39,1158,81"/><area shape="rect" id="node25" href="classg2o_1_1HyperGraph_1_1Edge.html#a6410bb70a917b5407770ef1f1090b5f5" title="g2o::HyperGraph::Edge\l::vertices" alt="" coords="995,105,1154,146"/><area shape="rect" id="node27" href="classg2o_1_1OptimizableGraph_1_1Vertex.html#a1037b978fec531eaf860d0037b992079" title="dimension of the estimated state belonging to this node " alt="" coords="997,235,1152,277"/><area shape="rect" id="node28" href="classg2o_1_1OptimizableGraph_1_1Edge.html#a90a86891adc47a179a7cd7ef31549916" title="returns the dimensions of the error function " alt="" coords="997,301,1152,342"/><area shape="rect" id="node29" href="classg2o_1_1HyperGraph_1_1Edge.html#aaec0b2c92c5496d0f0fea8f1abdc4311" title="g2o::HyperGraph::Edge\l::vertex" alt="" coords="995,170,1154,211"/><area shape="rect" id="node36" href="classORB__SLAM2_1_1KeyFrame.html#a8d21a23485b7c104a73d6ad3cccf4e93" title="为关键帧之间添加连接 " alt="" coords="511,982,681,1023"/><area shape="rect" id="node37" href="classORB__SLAM2_1_1KeyFrame.html#a09cb8502509c136536bf8d45793f8872" title="按照权重对连接的关键帧进行排序 " alt="" coords="754,982,923,1023"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa8110ca79cebaf509e378d30e55f1381"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ORB_SLAM2::LoopClosing::DetectLoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>始终是要把当前关键帧add到关键帧数据库中。。。</p>
<p>始终是要把当前关键帧add到关键帧数据库中。。。 </p>

<p>在文件 <a class="el" href="LoopClosing_8cpp_source.html">LoopClosing.cpp</a> 第 <a class="el" href="LoopClosing_8cpp_source.html#l00112">112</a> 行定义.</p>

<p>参考 <a class="el" href="KeyFrameDatabase_8cpp_source.html#l00043">ORB_SLAM2::KeyFrameDatabase::add()</a>, <a class="el" href="KeyFrameDatabase_8cpp_source.html#l00096">ORB_SLAM2::KeyFrameDatabase::DetectLoopCandidates()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00190">ORB_SLAM2::KeyFrame::GetConnectedKeyFrames()</a>, <a class="el" href="KeyFrame_8cpp_source.html#l00203">ORB_SLAM2::KeyFrame::GetVectorCovisibleKeyFrames()</a>, <a class="el" href="KeyFrame_8h_source.html#l00183">ORB_SLAM2::KeyFrame::mBowVec</a> , 以及 <a class="el" href="TemplatedVocabulary_8h_source.html#l01224">DBoW2::TemplatedVocabulary&lt; TDescriptor, F &gt;::score()</a>.</p>

<p><div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="classORB__SLAM2_1_1LoopClosing_aa8110ca79cebaf509e378d30e55f1381_cgraph.png" border="0" usemap="#classORB__SLAM2_1_1LoopClosing_aa8110ca79cebaf509e378d30e55f1381_cgraph" alt=""/></div>
<map name="classORB__SLAM2_1_1LoopClosing_aa8110ca79cebaf509e378d30e55f1381_cgraph" id="classORB__SLAM2_1_1LoopClosing_aa8110ca79cebaf509e378d30e55f1381_cgraph">
<area shape="rect" id="node2" href="classORB__SLAM2_1_1KeyFrameDatabase.html#a1b3a362116e3ecf2cd7e151be2ca3fcb" title="根据关键帧的词包，更新数据库的倒排索引 " alt="" coords="235,5,490,32"/><area shape="rect" id="node3" href="classORB__SLAM2_1_1KeyFrameDatabase.html#a2d396aae02c4318ea8c7e7eff8059c69" title="在闭环检测中找到与该关键帧可能闭环的关键帧 " alt="" coords="250,107,475,149"/><area shape="rect" id="node5" href="classORB__SLAM2_1_1KeyFrame.html#af4ffdf4441477a36c42d6605c573f1cf" title="得到与该关键帧连接的关键帧 " alt="" coords="553,42,735,83"/><area shape="rect" id="node6" href="classDBoW2_1_1TemplatedVocabulary.html#a4988c1ab067de25259115bf9963b02d9" title="DBoW2::TemplatedVocabulary\l::score" alt="" coords="543,173,745,214"/><area shape="rect" id="node7" href="classORB__SLAM2_1_1KeyFrame.html#a9315d396634f6637f70f716336777b8d" title="得到与该关键帧连接的关键帧(已按权值排序) " alt="" coords="257,225,468,266"/><area shape="rect" id="node4" href="classORB__SLAM2_1_1KeyFrame.html#a2ecb2df01af804fb727c93948a28475f" title="得到与该关键帧连接的前N个关键帧(已按权值排序) " alt="" coords="539,107,749,149"/></map>
</div>
</p>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>include/<a class="el" href="LoopClosing_8h_source.html">LoopClosing.h</a></li>
<li>src/<a class="el" href="LoopClosing_8cpp_source.html">LoopClosing.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceORB__SLAM2.html">ORB_SLAM2</a></li><li class="navelem"><a class="el" href="classORB__SLAM2_1_1LoopClosing.html">LoopClosing</a></li>
    <li class="footer">生成于 2017年 七月 18日 星期二 17:13:40 , 为 My Project使用 
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
